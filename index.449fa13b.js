function e(e){return e&&e.__esModule?e.default:e}function a(e,a,t,n){Object.defineProperty(e,a,{get:t,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},s=t.parcelRequired76b;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in r){var a=r[e];delete r[e];var t={id:e,exports:{}};return n[e]=t,a.call(t.exports,t,t.exports),t.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,a){r[e]=a},t.parcelRequired76b=s),s("kyEFX").register(JSON.parse('{"5ZPII":"index.449fa13b.js","3Hue4":"desktop-empty-poster.c37d8ef5.jpg","5UbS1":"index.05432eed.css","eM9ss":"library.21faac46.js"}')),s("5rZAK"),s("9kkEh");var i=s("2Opyx"),o=s("faVjL");var l,c,d,u,g,h,_,p,v,y,f,m,w,S=async function(){try{const e=await fetch(`https://api.themoviedb.org/3/configuration?api_key=${o.default}`),a=await e.json(),{images:t}=a;return`${t.secure_base_url}${t.profile_sizes[t.profile_sizes.length-1]}`}catch(e){console.log(e)}},E={};a(E,"getPaginationModel",(function(){return l}),(function(e){return l=e})),a(E,"ITEM_TYPES",(function(){return c}),(function(e){return c=e})),a(E,"ITEM_KEYS",(function(){return d}),(function(e){return d=e})),u=function(e,a){for(var t=[],n=e;n<=a;n++)t.push(n);return t},g=function(e){return{type:m.ELLIPSIS,key:w.FIRST_ELLIPSIS,value:e,isActive:!1}},h=function(e){return{type:m.ELLIPSIS,key:w.SECOND_ELLIPSIS,value:e,isActive:!1}},_=function(e){var a=e.currentPage;return{type:m.FIRST_PAGE_LINK,key:w.FIRST_PAGE_LINK,value:1,isActive:1===a}},p=function(e){var a=e.currentPage;return{type:m.PREVIOUS_PAGE_LINK,key:w.PREVIOUS_PAGE_LINK,value:Math.max(1,a-1),isActive:1===a}},v=function(e){var a=e.currentPage,t=e.totalPages;return{type:m.NEXT_PAGE_LINK,key:w.NEXT_PAGE_LINK,value:Math.min(t,a+1),isActive:a===t}},y=function(e){var a=e.currentPage,t=e.totalPages;return{type:m.LAST_PAGE_LINK,key:w.LAST_PAGE_LINK,value:t,isActive:a===t}},f=function(e){var a=e.currentPage;return function(e){return{type:m.PAGE,key:e,value:e,isActive:e===a}}},l=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var a=Number(e.totalPages);if(isNaN(a))throw new Error("getPaginationModel(): totalPages should be a number");if(a<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var t=Number(e.currentPage);if(isNaN(t))throw new Error("getPaginationModel(): currentPage should be a number");if(t<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(t>a)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var n=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(n))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(n<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var r=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(r))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(r<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var s=Boolean(e.hidePreviousAndNextPageLinks),i=Boolean(e.hideFirstAndLastPageLinks),o=Boolean(e.hideEllipsis),l=o?0:1,c=[],d=f(e);if(i||c.push(_(e)),s||c.push(p(e)),1+2*l+2*r+2*n>=a){var m=u(1,a).map(d);c.push.apply(c,m)}else{var w=n,S=u(1,w).map(d),E=a+1-n,b=u(E,a).map(d),L=Math.min(Math.max(t-r,w+l+1),E-l-2*r-1),P=L+2*r,$=u(L,P).map(d);if(c.push.apply(c,S),!o){var A=L-1,N=(A===w+1?d:g)(A);c.push(N)}if(c.push.apply(c,$),!o){var I=P+1,T=(I===E-1?d:h)(I);c.push(T)}c.push.apply(c,b)}return s||c.push(v(e)),i||c.push(y(e)),c},c=m={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},d=w={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6};var b,L=s("8ROYx");function P(e){if(!e||""===e)return"<a>Other</a>";const a=e.toLowerCase().indexOf("other");let t="";return-1!==a&&(e=e.slice(0,a),t="Other"),e.split(",").map((e=>`<a class='find-by-genre-js trending-gallery__genre-name'>${e}</a>`)).join(", ")+t}function $(a){let t=a.poster_path;return t=a.poster_path,t&&""!==t?(t=a.poster_path,`\n\t<picture>\n\t\t<source srcset="${L.default.IMG_BASE_URL}/w185${a.poster_path} 185w, ${L.default.IMG_BASE_URL}/w342${a.poster_path} 342w, ${L.default.IMG_BASE_URL}/w500${a.poster_path} 500w" media="(max-width: 767px)" sizes="280px">\n\t\t<source srcset="${L.default.IMG_BASE_URL}/w342${a.poster_path} 342w, ${L.default.IMG_BASE_URL}/w500${a.poster_path} 500w" media="(min-width: 768px)" sizes="336px">\n\t\t<source srcset="${L.default.IMG_BASE_URL}/w500${a.poster_path} 500w, ${L.default.IMG_BASE_URL}/w780${a.poster_path} 780w" media="(min-width: 1280px)" sizes="395px">\n\n  \t<img src="${L.default.IMG_BASE_URL}/original${a.poster_path}" alt="The poster of ${a.title} film" class="trending-gallery__image" loading="lazy" data-id="${a.id}"/>\n\t</picture>`):`<picture>\n  \t<img src="${e(b)}" alt="The poster of ${a.title} film" class="trending-gallery__image" loading="lazy" data-id="${a.id}"/>\n\t</picture>`}function A({results:e}){return e.map((e=>{const a=e.overview.length<340?e.overview:`${e.overview.slice(0,340)}...`,t=P(L.default.getGenresString(e.genre_ids));return e.release_date&&""!==e.release_date?e.release_date=e.release_date.slice(0,4):e.release_date="No info",`\n\t<li class='trending-gallery__item' data-id=${e.id}>\n    ${$(e)}\n    <div class="trending-gallery__wrapper">\n    \t<h3 class='trending-gallery__title' ><span  class="title-modal-open" data-id=${e.id}>${e.title}</span>\n\t\t\t</h3>\n    \t<p class='trending-gallery__info'>${P(L.default.getGenresString(e.genre_ids))} | <span class='find-by-year-js'>${e.release_date}</span></p>\n    </div>\n    <div class="trending-gallery__desc-wrap">\n                    <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="${e.id}">${e.title}</span>\n                        </h3>\n                        <p class="trending-gallery__info">${t}\n                              <span class="find-by-year-js">${e.release_date.slice(0,4)}</span>\n                              </p>\n                        <p class="trending-gallery__desc">${a}</p>\n                        \n                        <button type="button" class="trending-gallery__btn-more">Read more</button>\n                    </div>\n  </li>\n\t`})).join("")}function N({results:e},a){return e.map((e=>{e.release_date&&""!==e.release_date?e.release_date=e.release_date.slice(0,4):e.release_date="No info";const t=e.overview.length<340?e.overview:`${e.overview.slice(0,340)}...`,n=P(L.default.getGenresStringWithSearchedGenre(e.genre_ids,a));return`\n\t<li class='trending-gallery__item'  data-id="${e.id}">\n    ${$(e)}\n    <div class="trending-gallery__wrapper">\n    \t<h3 class='trending-gallery__title'><span class="title-modal-open">${e.title}</span></h3>\n    \t<p class='trending-gallery__info'>${n} | <span class='find-by-year-js'>${e.release_date.slice(0,4)}</span></p>\n    </div>\n    <div class="trending-gallery__desc-wrap">\n                    <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="${e.id}">${e.title}</span>\n                        </h3>\n                        <p class="trending-gallery__info">${n}\n                              <span class="find-by-year-js">${e.release_date.slice(0,4)}</span>\n                              </p>\n                        <p class="trending-gallery__desc">${t}</p>\n                        \n                        <button type="button" class="trending-gallery__btn-more">Read more</button>\n                    </div>\n  </li>\n\t`})).join("")}b=new URL(s("kyEFX").resolve("3Hue4"),import.meta.url).toString();var I=s("7Y9D8");L=s("8ROYx");const T=/^\s*$/,F=new(0,L.default);F.fetchGenres();const M={galleryEl:document.querySelector(".trending-gallery"),searchInputEl:document.querySelector(".search__input"),searchForm:document.querySelector(".search"),showAdvancedSearchEl:document.querySelector(".show-advanced-search-js"),hideAdvancedSearchEl:document.querySelector(".hide-advanced-search-js"),advancedSearchEl:document.querySelector(".search--advanced-js "),advancedSearchWrap:document.querySelector(".search--advanced-js div "),advancedSearchChosenWindowEl:document.querySelector(".advanced-search__chosen-window"),advancedSearchChosenEl:document.querySelector(".advanced-search__chosen"),resetAdvancedSearchBtn:document.querySelector(".advanced-search__reset"),advacedSearchSubmitBtn:document.querySelector(".advanced-search__submit"),advacedSearchYearInput:document.querySelector(".advanced-search__year")};function R(){window.scroll({top:0,left:0,behavior:"smooth"})}I=s("7Y9D8"),L=s("8ROYx"),I=s("7Y9D8");s("dBmsK");let G={primary_release_year:"",with_genres:"",sort_by:"",page:"",with_watch_monetization_types:"",without_genres:""},B=!1;function k(){setTimeout((()=>{M.advancedSearchEl.classList.remove("visually"),M.showAdvancedSearchEl.parentNode.classList.add("visually-hidden"),M.hideAdvancedSearchEl.parentNode.classList.remove("visually-hidden")}),100),B||U(M.advancedSearchWrap)}function x(){M.advancedSearchEl.classList.toggle("visually"),M.showAdvancedSearchEl.parentNode.classList.toggle("visually-hidden"),M.hideAdvancedSearchEl.parentNode.classList.toggle("visually-hidden")}function U(e){const a=Object.values(L.default.genres).map((e=>`<option value="${e}" class="advanced-search__option">${e}</option>`)).join(""),t=`\n\t\t<select name="genre"  class="advanced-search__genre advanced-search__select">\n\t\t\t<option value="" class="advanced-search__option--main">Choose genre to find</option>\n\t\t\t${a}\n\t\t</select>`,n=`\n\t\t<select name="excludeGenre" \n\t\t\tclass="advanced-search__exlude-genre advanced-search__select">\n\t\t\t<option value="" class="advanced-search__option--main">Choose genre to exlude</option>\n\t\t\t${a}\n\t\t</select>`,r=`\n\t\t<select name="sortParams" \t\tclass="advanced-search__sort-buy advanced-search__select">\n\t\t\t<option value="" class="advanced-search__option--main">Choose sorting parameter</option>\n\t\t\t${Object.keys(L.default.sort_by_types).map((e=>`<option value="${e}" class="advanced-search__option">${L.default.sort_by_types[e]}</option>`)).join("")}\n\t\t</select>`;e.insertAdjacentHTML("afterbegin",t+n+r),B=!0}function j(e){F.fetchAdvancedMovieSearch(e).then((e=>{const{data:a}=e;R(),M.galleryEl.innerHTML=A(e.data),q.isTrendingFilmsShown=!1,q.isFilmsByQueryShown=!1,q.isFilmsByAdvancedSearchShown=!0,q.isFilmsByYearShown=!1,q.isFilmsByGenreShown=!1,a.total_pages>500?K.totalPages=500:K.totalPages=a.total_pages,J(F.page,K.totalPages)})).catch(console.error)}function O(){M.advancedSearchEl.reset()}async function D(){O(),q.isFilmsByYearShown=!1,q.isFilmsByGenreShown=!1,q.isFilmsByQueryShown=!1,q.isFilmsByAdvancedSearchShown=!1,q.isTrendingFilmsShown=!0,M.advancedSearchChosenWindowEl.classList.add("visually-hidden"),await V(1)}M.searchForm.addEventListener("click",(function(e){if(!e.target.classList.value.includes("show-advanced-search-js"))return;!function(){if(setTimeout((()=>x()),100),B)return;U(M.advancedSearchWrap)}()})),M.searchForm.addEventListener("click",(function(e){if(!e.target.classList.value.includes("hide-advanced-search-js"))return;x()})),M.advancedSearchEl.addEventListener("submit",(function(e){e.preventDefault();const a={with_genres:L.default.genreIDs[M.advancedSearchEl.genre.value],without_genres:L.default.genreIDs[M.advancedSearchEl.excludeGenre.value],sort_by:L.default.sort_by_types[M.advancedSearchEl.sortParams.value],with_watch_monetization_types:L.default.watch_monetization_types[M.advancedSearchEl.monetization.value]};if(!function(e){let a=!1;return""!==M.advancedSearchEl.year.value||(Object.values(e).forEach((e=>{void 0===e||T.test(e)||(a=!0)})),a)}(a))return void I.Notify.failure("Choose some parameters!");F.page=1,q.isFilmsByYearShown=!0;let t=M.advancedSearchEl.year.value;if(!function(e){return""===e||!!((e=Number.parseInt(e))&&e>1880&&e<=(new Date).getFullYear())}(t))return I.Notify.failure("The year chosen is ineligible!"),void O();a.primary_release_year=t;let n=!0;if(Object.keys(a).forEach((e=>{a[e]!==G[e]&&(n=!1)})),a.with_genres===a.without_genres&&void 0!==a.with_genres&&void 0!==a.without_genres)return I.Notify.failure("You can't choose and exclude the same genre!"),void O();if(n)return I.Notify.warning("Please,make changes in search params and try again"),void O();a.page=F.page,G.with_genres=a.with_genres,G.without_genres=a.without_genres,G.sort_by=a.sort_by,G.primary_release_year=a.primary_release_year,G.with_watch_monetization_types=a.with_watch_monetization_types,G.page=a.page,X(),O(),I.Notify.info("Searching"),r=G,M.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),M.advancedSearchChosenEl.innerHTML=`${function(e){return Object.keys(e).reduce(((a,t)=>e[t]&&""!==e[t]&&"page"!==t?"with_genres"===t||"without_genres"===t?a+`<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>${t.split("_").join(" ")}: </span>${L.default.genres[e[t]]}</div>`:a+`<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>${t.split("_").join(" ")}: </span>${e[t]}</div>`:a),"")}(r)}`,j(a);var r})),M.resetAdvancedSearchBtn.addEventListener("click",D),window.onResetAdvancedSearch=()=>{D()};const H={userQueryForPagination:"",userYearForPagination:"",userGenreForPagination:""};M.searchForm.addEventListener("submit",(async function(e){e.preventDefault(),X(),M.advancedSearchChosenWindowEl.classList.add("visually-hidden");const a=M.searchInputEl.value;if(H.userQueryForPagination=a,M.searchInputEl.value="",T.test(a))return;try{F.page=1;const e=await F.fetchFilmsByQuery(a),{data:t}=e;if(0===t.total_results)return I.Notify.failure("Search result not successful. Enter the correct movie name and try again!"),void V(1);R(),M.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),M.advancedSearchChosenEl.innerHTML=`<div class='advanced-search__chosen-option'>\n    <span class='advanced-search__search-key'>search word: </span>${a}\n     <button class="advanced-search__reset advanced-search__key-reset" type="button" onclick='onResetAdvancedSearch()'>Reset</button>\n     </div>`,M.galleryEl.innerHTML=A(t),q.isTrendingFilmsShown=!1,q.isFilmsByGenreShown=!1,q.isFilmsByYearShown=!1,q.isFilmsByAdvancedSearchShown=!1,q.isFilmsByQueryShown=!0,K.totalPages=t.total_pages,J(F.page,K.totalPages)}catch(e){console.error(e)}}));var C=s("gjiCh"),Y=s("krGWQ");L=s("8ROYx"),L=s("8ROYx");const q={isTrendingFilmsShown:!0,isFilmsByQueryShown:!1,isFilmsByYearShown:!1,isFilmsByGenreShown:!1,isFilmsByAdvancedSearchShown:!1},K={currentPage:0,totalPages:0,boundaryPagesRange:1,siblingPagesRange:2,hideEllipsis:!1,hidePreviousAndNextPagebtns:!1,hideFirstAndLastPagebtns:!0};let W=window.matchMedia("(max-width: 767px)");ae(W.matches),W.addEventListener("change",(function(){const{currentPage:e,totalPages:a}=K;ae(W.matches),J(e,a)}));const Q=document.querySelector(".trending-gallery");async function z(e){try{Q.innerHTML="",(0,C.spinnerStart)();const a=await(0,i.default)(e),t=await async function(e){try{const a=await S(),t=L.default.genres;return e.map((e=>{const n=e.overview.length<340?e.overview:`${e.overview.slice(0,340)}...`;let r="";const s=function(e,a){const t=e.genre_ids.map((e=>a[e]));return t}(e,t);return r=s.length>2?`<a class='find-by-genre-js trending-gallery__genre-name'>${s[0]}</a>, <a class='find-by-genre-js trending-gallery__genre-name'>${s[1]}</a>, Other | `:2===s.length?`<a class='find-by-genre-js trending-gallery__genre-name'>${s[0]}</a>, <a class='find-by-genre-js trending-gallery__genre-name'>${s[1]}</a> | `:1===s.length?`<a class='find-by-genre-js trending-gallery__genre-name'>${s}</a> | `:s,`<li class="trending-gallery__item" data-id="${e.id}">\n                  \n                    <div>\n                        <img src="${a}${e.poster_path}"\n                            class="trending-gallery__image" data-id="${e.id}"\n                            alt="The poster of ${e.title} film " onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1616530940355-351fabd9524b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80';"\n                            />\n\n                    </div>            \n                    <div class="trending-gallery__wrapper">\n                        <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="${e.id}">${e.title}</span>\n                        </h3>\n                              <p class="trending-gallery__info">${r}\n                              <span class="find-by-year-js">${e.release_date.slice(0,4)}</span>\n                              </p>\n                    </div>\n                    <div class="trending-gallery__desc-wrap">\n                    <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="${e.id}">${e.title}</span>\n                        </h3>\n                        <p class="trending-gallery__info">${r}\n                              <span class="find-by-year-js">${e.release_date.slice(0,4)}</span>\n                              </p>\n                        <p class="trending-gallery__desc">${n}</p>\n                        \n                        <button type="button" class="trending-gallery__btn-more">Read more</button>\n                    </div>\n                  \n                </li>`})).join("")}catch(e){console.log(e)}}(a.results);Q.innerHTML=t,a.total_pages>500?K.totalPages=500:K.totalPages=a.total_pages,q.isTrendingFilmsShown=!0,a&&J(e,K.totalPages)}catch(e){console.dir(e)}finally{setTimeout((()=>{(0,C.spinnerStop)()}),1e3)}}z(1);var V=z;function X(){Y.refs.paginationContainer.removeEventListener("click",Z),Y.refs.filmsPaginationContainer.innerHTML=""}function J(a,t){Y.refs.filmsPaginationContainer.innerHTML=function(a,t){K.currentPage=a,K.totalPages=t;const n=e(E).getPaginationModel(K);return`<ul class="pagination__container">${n.map(ee).join("")}</ul>`}(a,t),Y.refs.paginationContainer=document.querySelector(".pagination__container"),Y.refs.paginationContainer.addEventListener("click",Z)}async function Z(e){if("BUTTON"===e.target.nodeName)try{X();const a=e.target,t=Number(a.dataset.value);if(q.isTrendingFilmsShown)return await z(t),R(),void(0,C.spinnerStart)();if(q.isFilmsByQueryShown){F.page=t;const e=await F.fetchFilmsByQuery(H.userQueryForPagination);R(),(0,C.spinnerStart)();const{data:a}=e;return M.galleryEl.innerHTML=A(a),void J(F.page,K.totalPages)}if(q.isFilmsByYearShown){F.page=t;const e=await F.fetchMoviesByYear(H.userYearForPagination);R(),(0,C.spinnerStart)();const{data:a}=e;return M.galleryEl.innerHTML=A(a),void J(F.page,K.totalPages)}if(q.isFilmsByGenreShown){F.page=t;const e=await F.fetchMoviesByGenre(H.userGenreForPagination);R(),(0,C.spinnerStart)();const{data:a}=e;return M.galleryEl.innerHTML=A(a),void J(F.page,K.totalPages)}if(q.isFilmsByAdvancedSearchShown)return G.page=t,F.page=t,R(),(0,C.spinnerStart)(),void(M.galleryEl.innerHTML=j(G))}catch(e){console.log(e)}finally{setTimeout(C.spinnerStop,500)}}function ee(e){const{type:a,value:t,isActive:n,key:r}=e;let s;switch(a){case"PREVIOUS_PAGE_LINK":return s="--prev",n?te(s,t,"disabled"):te(s,t);case"NEXT_PAGE_LINK":return s="--next",n?te(s,t,"disabled"):te(s,t);case"ELLIPSIS":return s="--ellipsis",te(s,t);case"PAGE":return s="--active",function(e,a,t,n){return t?` <li class="pagination__element">\n          <button type="button" class="pagination__btn pagination__btn${e}" data-value=${a} ${n}>${a}</button>\n        </li>`:` <li class="pagination__element">\n       <button type="button" class="pagination__btn" data-value=${a}>${a}</button>\n     </li>`}(s,t,n,"disabled")}}function ae(e){e?(K.boundaryPagesRange=0,K.hideEllipsis=!0):(K.boundaryPagesRange=1,K.hideEllipsis=!1)}function te(e,a,t=""){return` <li class="pagination__element">\n          <button type="button" class="pagination__btn pagination__btn${e}" data-value=${a} ${t}></button>\n        </li>`}s("ak03H");var ne=s("5rZAK"),re=(Y=s("krGWQ"),I=s("7Y9D8"),s("1jYKa")),se=s("37v9V");const{allCardsSection:ie,modal:oe,overflow:le,closeBtn:ce,innerModal:de,body:ue}=Y.refs;let ge,he;async function _e(){if(null===ne.auth.currentUser)ge=[],he=[];else{const e=await(0,ne.readAllUserData)(ne.auth.currentUser.uid),a=await(0,ne.readAllUserData)(ne.auth.currentUser.uid);ge=e.userDataQueue||[],he=a.userDataWatch||[]}}async function pe(){if(null===ne.auth.currentUser){const e=localStorage.getItem("currentFilmList");return JSON.parse(e)}try{const e=await(0,ne.currentFilmList)(ne.auth.currentUser.uid);return e.currentFilmList||[]}catch{return[]}}async function ve(a){if("IMG"===a.target.nodeName||"title-modal-open"===a.target.className||"trending-gallery__btn-more"===a.target.className){de.innerHTML="",oe.classList.remove("hidden-movie-modal"),le.classList.remove("hidden-movie-modal"),le.classList.add("overflow-height"),ie.removeEventListener("click",ve),document.addEventListener("keydown",fe),ce.addEventListener("click",me),le.addEventListener("click",ye);const t="IMG"===a.target.nodeName?a.target.dataset.id:a.target.closest("li").dataset.id;await async function(e){if(null===ne.auth.currentUser){const a=pe(),t=await(0,re.renderModal)(a,e,he,ge);de.innerHTML=t}else{await _e();const a=await pe(),t=await(0,re.renderModal)(a,e,he,ge);de.innerHTML=t}}(t);const n=window.scrollY;ue.style.position="fixed",ue.style.top=`-${n}px`;const r=document.querySelector(".modal__btn-watched"),s=document.querySelector(".modal__btn-queue"),i=document.querySelector(".movie-modal__btn-watch-trailer");null!==ne.auth.currentUser?(r.addEventListener("click",we),s.addEventListener("click",Se)):(r.setAttribute("disabled","disabled"),s.setAttribute("disabled","disabled"),e(I).Notify.info("Log in and you will have the opportunity to create your own movies library")),i.addEventListener("click",se.onTrailerBtnClick)}}function ye(e){e.currentTarget===e.target&&me()}function fe(e){"Escape"===e.code&&me()}function me(){oe.classList.add("hidden-movie-modal"),le.classList.add("hidden-movie-modal"),le.classList.remove("overflow-height"),ie.addEventListener("click",ve),document.removeEventListener("keydown",me),ce.removeEventListener("click",me),le.removeEventListener("click",ye);const e=ue.style.top;ue.style.position="",ue.style.top="",window.scrollTo(0,-1*parseInt(e||"0"))}async function we(a){const t=document.querySelector(".movie-modal__main"),n={poster_path:t.dataset.poster,title:t.dataset.title,genre_ids:t.dataset.genres,release_date:t.dataset.date,vote_average:t.dataset.votes,id:t.dataset.id},r=he.some((e=>e.id===n.id));if("ADD TO WATCHED"===a.target.innerText){if(!r){if(he.push(n),null===ne.auth.currentUser){localStorage.setItem("movieWatched",JSON.stringify(he)),a.target.innerText="Remove from watched";JSON.parse(localStorage.getItem("movieWatched"))}else{await(0,ne.writeUserDataWatch)(ne.auth.currentUser.uid,he),a.target.innerText="Remove from watched";(await(0,ne.readAllUserData)(ne.auth.currentUser.uid)).userDataWatch}e(I).Notify.success("Added to watched!")}}else"REMOVE FROM WATCHED"===a.target.innerText&&(he=he.filter((e=>e.id!==n.id)),null===ne.auth.currentUser?localStorage.setItem("movieWatched",JSON.stringify(he)):await(0,ne.writeUserDataWatch)(ne.auth.currentUser.uid,he),a.target.innerText="Add to watched",e(I).Notify.success("Removed from watched!"))}async function Se(a){const t=document.querySelector(".movie-modal__main"),n={poster_path:t.dataset.poster,title:t.dataset.title,genre_ids:t.dataset.genres,release_date:t.dataset.date,vote_average:t.dataset.votes,id:t.dataset.id},r=ge.some((e=>e.id===n.id));"ADD TO QUEUE"===a.target.innerText?r||(ge.push(n),null===ne.auth.currentUser?localStorage.setItem("movieQueue",JSON.stringify(ge)):await(0,ne.writeUserDataQueue)(ne.auth.currentUser.uid,ge),a.target.innerText="Remove from queue",e(I).Notify.success("Added to queue!")):"REMOVE FROM QUEUE"===a.target.innerText&&(ge=ge.filter((e=>e.id!==n.id)),null===ne.auth.currentUser?localStorage.setItem("movieQueue",JSON.stringify(ge)):await(0,ne.writeUserDataQueue)(ne.auth.currentUser.uid,ge),a.target.innerText="Add to queue",e(I).Notify.success("Removed from queue!"))}setTimeout((()=>{_e()}),2500),ie.addEventListener("click",ve),s("kMp2Z");I=s("7Y9D8");M.galleryEl.addEventListener("click",(function(e){if(![...e.target.classList].includes("find-by-year-js"))return;if(q.isFilmsByYearShown)return void I.Notify.info("Movies of this year are already shown");X(),R();let a=Number(e.target.innerText);H.userQueryForPagination="",H.userYearForPagination=a,F.page=1,F.fetchMoviesByYear(a).then((e=>{const{data:t}=e;0===t.total_results&&I.Notify.failure("Search result not successful."),R(),M.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),M.advancedSearchChosenEl.innerHTML=`<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>primary release year: </span>${a}</div>`,k(),M.advacedSearchYearInput.value=a,M.galleryEl.innerHTML=A(t),q.isTrendingFilmsShown=!1,q.isFilmsByQueryShown=!1,q.isFilmsByGenreShown=!1,q.isFilmsByAdvancedSearchShown=!1,q.isFilmsByYearShown=!0,t.total_pages>500?K.totalPages=500:K.totalPages=t.total_pages,J(F.page,K.totalPages)})).catch((e=>{console.error(e),I.Notify.failure("No films with such year found!")}))}));L=s("8ROYx"),I=s("7Y9D8");let Ee;M.galleryEl.addEventListener("click",(function(e){q.isFilmsByAdvancedSearchShown&&M.advancedSearchEl.reset();if(![...e.target.classList].includes("find-by-genre-js"))return;let a=e.target.innerText.trim();","===a[a.length-1]&&(a=a.slice(0,-1));if(Ee===L.default.genreIDs[a.toLowerCase()]&&!0===q.isFilmsByGenreShown)return void I.Notify.info("Movies of this genre are already shown");Ee=L.default.genreIDs[a.toLowerCase()],X(),H.userGenreForPagination=Ee,F.page=1,F.fetchMoviesByGenre(`${L.default.genreIDs[a.toLowerCase()]}`).then((e=>{const{data:t}=e;0===t.total_results&&I.Notify.failure("Search result not successful."),R(),M.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),M.advancedSearchChosenEl.innerHTML=`<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>genre: </span>${a.toLowerCase()}</div>`,k(),function(e){const a=document.querySelector(".advanced-search__genre");a.value=e;const t=Array.from(a.options);t.find((a=>a.label===e.toLowerCase())).selected=!0}(a),M.galleryEl.innerHTML=N(t,a),q.isTrendingFilmsShown=!1,q.isFilmsByQueryShown=!1,q.isFilmsByAdvancedSearchShown=!1,q.isFilmsByYearShown=!1,q.isFilmsByGenreShown=!0,t.total_pages>500?K.totalPages=500:K.totalPages=t.total_pages,J(F.page,K.totalPages)})).catch((e=>{console.error(e),I.Notify.failure("No films with such genre found!")}))})),s("9kkEh"),s("dBmsK");
//# sourceMappingURL=index.449fa13b.js.map
