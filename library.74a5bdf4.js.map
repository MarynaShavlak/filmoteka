{"mappings":"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","sources":["src/library.js","src/js/features/my-library-watched-queue/my-library-watched-queue.js","src/js/components/modal/movie_modal-library.js"],"sourcesContent":["import './js/auth/authFireBase.js';\nimport './js/components/modal/openModalWindow.js';\nimport './js/features/my-library-watched-queue/my-library-watched-queue';\nimport './js/features/dark-mode';\nimport { spinnerStart, spinnerStop } from './js/features/loader';\nimport './js/features/scroll_to_top';\nimport './js/components/modal/movie_modal-library.js';\nimport './js/components/modal/openModalWindow.js';\nimport './js/components/header/canvas-header.js';\nspinnerStart();\nsetTimeout(spinnerStop, 1000);","import Notiflix from 'notiflix';\nimport { renderMoviesLibrary } from './renderMoviesLibrary';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport fetchPopularFilms from '../trending-search-main/fetch-movies';\nimport { readAllUserData, currentUID, auth } from '../../auth/authFireBase.js';\nimport { async } from '@firebase/util';\n\nconst watchedBtnEl = document.querySelector('.js-library-btn--watched');\nconst queueBtnEl = document.querySelector('.js-library-btn--queue');\nconst movieListEl = document.querySelector('.movie-list');\n\nasync function defaultLibrary() {\n  const minPage = 1;\n  const maxPage = 100;\n  let page = Math.floor(Math.random() * (maxPage - minPage + 1) + minPage);\n  try {\n    const IMG_PATH = 'https://image.tmdb.org/t/p/original';\n    movieListEl.innerHTML = '';\n    const films = await fetchPopularFilms(page);\n\n    const markup = `<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' data-id='${films.results[1].id}' src=${IMG_PATH}${films.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[1].overview}</p></div>\n    </div>\n\n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[2].poster_path} data-id='${films.results[2].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[2].overview}</p></div>\n    </div>\n\n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[3].poster_path} data-id='${films.results[3].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[3].overview}</p></div>\n    </div>`;\n\n    movieListEl.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\ndefaultLibrary();\nexport async function onWatchedBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = 'transparent';\n  queueBtnEl.style.borderColor = '#ffffff';\n\n  watchedBtnEl.style.background = '#ff6b01';\n  watchedBtnEl.style.borderColor = '#ff6b01';\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's fun🎭</p>\";\n    return;\n  }\n  const movieWatched = await readAllUserData(auth.currentUser.uid);\n  if (movieWatched.userDataWatch === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's fun🎭</p>\";\n\n    return;\n  }\n  if (Object.keys(movieWatched).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>It seems you haven't watched any movie. You should try, it's fun🎭</p>\";\n    return;\n  }\n  const moviesCards = movieWatched.userDataWatch\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nexport async function onQueueBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = '#ff6b01';\n  queueBtnEl.style.borderColor = '#ff6b01';\n\n  watchedBtnEl.style.background = 'transparent';\n  watchedBtnEl.style.borderColor = '#ffffff';\n\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this✨</p>\";\n    return;\n  }\n  const movieQueue = await readAllUserData(auth.currentUser.uid);\n  if (movieQueue.userDataQueue === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this✨</p>\";\n    return;\n  }\n  if (Object.keys(movieQueue).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>The queue is empty. Add all Harry Potter movies - you won't regret this✨</p>\";\n    return;\n  }\n\n  const moviesCards = movieQueue.userDataQueue\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n","import {\n  auth,\n  writeUserDataQueue,\n  writeUserDataWatch,\n  currentFilmList,\n  readAllUserData,\n} from '../../auth/authFireBase.js';\nimport { refs } from '../../utils/refs';\nimport Notiflix from 'notiflix';\nimport { renderModal } from './render_modal';\nimport { onTrailerBtnClick } from '../../features/trailer';\nimport { onWatchedBtnClick } from '../../features/my-library-watched-queue/my-library-watched-queue'; //add\nimport { onQueueBtnClick } from '../../features/my-library-watched-queue/my-library-watched-queue'; //add\n\nconst { modal, overflow, closeBtn, innerModal, body, sectionLibrary } = refs;\nlet queue;\nlet watched;\nasync function updateVar() {\n  if (auth.currentUser === null) {\n    queue = [];\n    watched = [];\n  } else {\n    const q = await readAllUserData(auth.currentUser.uid);\n    const w = await readAllUserData(auth.currentUser.uid);\n    queue = q.userDataQueue || [];\n    watched = w.userDataWatch || [];\n  }\n}\n\nsetTimeout(() => {\n  updateVar();\n}, 2500);\n\nsectionLibrary.addEventListener('click', showModal);\n\nasync function updateMoviesList() {\n  if (auth.currentUser === null) {\n    const allMoviesListFromStorage = localStorage.getItem('currentFilmList');\n    const allMoviesList = JSON.parse(allMoviesListFromStorage);\n    return allMoviesList;\n  } else {\n    try {\n      const allMoviesListFromStorage = await currentFilmList(\n        auth.currentUser.uid\n      );\n      const allMoviesList = allMoviesListFromStorage.currentFilmList || [];\n      return allMoviesList;\n    } catch {\n      return [];\n    }\n  }\n}\nexport async function showModal(e) {\n  if (e.target.nodeName === 'IMG' || e.target.nodeName === 'SPAN') {\n    const main = document.querySelector('main');\n    const mainHeight = main.offsetHeight;\n    innerModal.innerHTML = '';\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n    main.style.height = `${mainHeight}px`;\n    modal.classList.remove('hidden-movie-modal');\n    overflow.classList.remove('hidden-movie-modal');\n    overflow.classList.add('overflow-height');\n    sectionLibrary.removeEventListener('click', showModal);\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id =\n      e.target.nodeName === 'IMG'\n        ? e.target.dataset.id\n        : e.target.closest('li').dataset.id;\n    await createModal(id);\n    // const top = window.scrollY;\n    // body.style.position = 'fixed';\n    // body.style.top = `-${top}px`;\n    // main.style.height = `${mainHeight}px`;\n    const watchedBtn = document.querySelector('.modal__btn-watched');\n    const queueBtn = document.querySelector('.modal__btn-queue');\n    const watchTrailerBtn = document.querySelector(\n      '.movie-modal__btn-watch-trailer'\n    );\n    if (auth.currentUser !== null) {\n      watchedBtn.addEventListener('click', handleWatched);\n      queueBtn.addEventListener('click', handleQueued);\n    } else {\n      watchedBtn.setAttribute('disabled', 'disabled');\n      queueBtn.setAttribute('disabled', 'disabled');\n    }\n    watchTrailerBtn.addEventListener('click', onTrailerBtnClick);\n  }\n}\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\nfunction closeModal() {\n  const main = document.querySelector('main');\n  modal.classList.add('hidden-movie-modal');\n  overflow.classList.add('hidden-movie-modal');\n  overflow.classList.remove('overflow-height');\n  sectionLibrary.addEventListener('click', showModal);\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  main.style.height = `auto`;\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nasync function createModal(id) {\n  if (auth.currentUser === null) {\n    const currentList = updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  } else {\n    await updateVar();\n    const currentList = await updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  }\n}\n\nasync function handleWatched(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInWatched = watched.some(film => film.id === movie.id);\n\n  if (e.target.innerText === 'ADD TO WATCHED') {\n    if (!isInWatched) {\n      watched.push(movie);\n      if (auth.currentUser === null) {\n        localStorage.setItem('movieWatched', JSON.stringify(watched));\n        e.target.innerText = 'Remove from watched';\n        const saved = JSON.parse(localStorage.getItem('movieWatched'));\n      } else {\n        await writeUserDataWatch(auth.currentUser.uid, watched);\n        e.target.innerText = 'Remove from watched';\n        const w = await readAllUserData(auth.currentUser.uid);\n        const saved = w.userDataWatch || [];\n      }\n\n      onWatchedBtnClick();\n      Notiflix.Notify.success('Added to watched!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM WATCHED') {\n    watched = watched.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieWatched', JSON.stringify(watched));\n    } else {\n      await writeUserDataWatch(auth.currentUser.uid, watched);\n    }\n    e.target.innerText = 'Add to watched';\n    onWatchedBtnClick();\n    Notiflix.Notify.success('Removed from watched!');\n  }\n}\nasync function handleQueued(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInQueued = queue.some(film => film.id === movie.id);\n  if (e.target.innerText === 'ADD TO QUEUE') {\n    if (!isInQueued) {\n      queue.push(movie);\n      if (auth.currentUser === null)\n        localStorage.setItem('movieQueue', JSON.stringify(queue));\n      else {\n        await writeUserDataQueue(auth.currentUser.uid, queue);\n      }\n      e.target.innerText = 'Remove from queue';\n      onQueueBtnClick();\n      Notiflix.Notify.success('Added to queue!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM QUEUE') {\n    queue = queue.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieQueue', JSON.stringify(queue));\n    } else {\n      await writeUserDataQueue(auth.currentUser.uid, queue);\n    }\n\n    e.target.innerText = 'Add to queue';\n    onQueueBtnClick();\n    Notiflix.Notify.success('Removed from queue!');\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$428fed59ddb850b3$var$watchedBtnEl","document","querySelector","$428fed59ddb850b3$var$queueBtnEl","$428fed59ddb850b3$var$movieListEl","$428fed59ddb850b3$var$_defaultLibrary","$parcel$interopDefault","$2TvXO","mark","_callee","page","IMG_PATH","films","markup","Math","floor","random","innerHTML","$yUIZd","default","_ctx","sent","concat","results","id","poster_path","title","overview","console","log","t0","apply","this","arguments","$428fed59ddb850b3$export$852eb21c65e590aa","$428fed59ddb850b3$var$_onWatchedBtnClick","movieWatched","moviesCards","$gx8jD","spinnerStart","setTimeout","spinnerStop","style","background","borderColor","$04TGm","auth","currentUser","readAllUserData","uid","undefined","userDataWatch","Object","keys","length","map","movie","$7DqBt","renderMoviesLibrary","join","$428fed59ddb850b3$export$47c64e1cb6fdbeb7","$428fed59ddb850b3$var$_onQueueBtnClick","movieQueue","userDataQueue","$428fed59ddb850b3$var$defaultLibrary","addEventListener","$6015b8d8b54dcd0d$var$queue","$6015b8d8b54dcd0d$var$watched","$6015b8d8b54dcd0d$var$modal","$ikGeD","refs","modal","$6015b8d8b54dcd0d$var$overflow","overflow","$6015b8d8b54dcd0d$var$closeBtn","closeBtn","$6015b8d8b54dcd0d$var$innerModal","innerModal","$6015b8d8b54dcd0d$var$body","body","$6015b8d8b54dcd0d$var$sectionLibrary","sectionLibrary","$6015b8d8b54dcd0d$var$updateVar","$6015b8d8b54dcd0d$var$_updateVar","q","w","$6015b8d8b54dcd0d$var$updateMoviesList","$6015b8d8b54dcd0d$var$_updateMoviesList","allMoviesListFromStorage","allMoviesList","allMoviesListFromStorage1","allMoviesList1","localStorage","getItem","JSON","parse","currentFilmList","$6015b8d8b54dcd0d$export$d7e8d4d4450c819c","e","$6015b8d8b54dcd0d$var$_showModal","main","mainHeight","top","watchedBtn","queueBtn","watchTrailerBtn","target","nodeName","offsetHeight","window","scrollY","position","height","classList","remove","add","removeEventListener","$6015b8d8b54dcd0d$var$closeModalOnEsc","$6015b8d8b54dcd0d$var$closeModal","$6015b8d8b54dcd0d$var$closeModalOverflow","dataset","closest","$6015b8d8b54dcd0d$var$createModal","$6015b8d8b54dcd0d$var$handleWatched","$6015b8d8b54dcd0d$var$handleQueued","setAttribute","$8wJK5","onTrailerBtnClick","currentTarget","code","scrollTo","parseInt","$6015b8d8b54dcd0d$var$_createModal","currentList","rendered","currentList1","rendered1","$eONm9","renderModal","$6015b8d8b54dcd0d$var$_handleWatched","modalEl","isInWatched","poster","genre_ids","genres","release_date","date","vote_average","votes","some","film","innerText","push","setItem","stringify","writeUserDataWatch","$6JpON","Notify","success","filter","$6015b8d8b54dcd0d$var$_handleQueued","isInQueued","writeUserDataQueue"],"version":3,"file":"library.74a5bdf4.js.map"}