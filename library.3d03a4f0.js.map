{"mappings":"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","sources":["src/library.js","src/js/my-library-watched-queue/my-library-watched-queue.js","src/js/movie_modal-library.js"],"sourcesContent":["import './js/authFireBase.js';\nimport './js/openModalWindow.js';\nimport './js/my-library-watched-queue/my-library-watched-queue';\nimport './js/dark-mode';\nimport { spinnerStart, spinnerStop } from './js/loader';\nspinnerStart();\nsetTimeout(spinnerStop, 1000);\nimport './js/scroll_to_top';\nimport './js/movie_modal-library.js';\nimport './js/openModalWindow.js';\nimport './js/canvas-header.js';\n","import Notiflix from 'notiflix';\nimport { renderMoviesLibrary } from './renderMoviesLibrary';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport fetchPopularFilms from '../trending-search-main/fetch-movies';\nimport { readAllUserData, currentUID, auth } from '../authFireBase.js';\nimport { async } from '@firebase/util';\n\nconst watchedBtnEl = document.querySelector('.js-library-btn--watched');\nconst queueBtnEl = document.querySelector('.js-library-btn--queue');\nconst movieListEl = document.querySelector('.movie-list');\n\nasync function defaultLibrary() {\n  const minPage = 1;\n  const maxPage = 100;\n  let page = Math.floor(Math.random() * (maxPage - minPage + 1) + minPage);\n  try {\n    const IMG_PATH = 'https://image.tmdb.org/t/p/original';\n    movieListEl.innerHTML = '';\n    const films = await fetchPopularFilms(page);\n\n    const markup = `<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' data-id='${films.results[1].id}' src=${IMG_PATH}${films.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[1].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[2].poster_path} data-id='${films.results[2].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[2].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[3].poster_path} data-id='${films.results[3].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[3].overview}</p></div>\n    </div>`;\n\n    movieListEl.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\ndefaultLibrary();\nexport async function onWatchedBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = 'transparent';\n  queueBtnEl.style.borderColor = '#ffffff';\n\n  watchedBtnEl.style.background = '#ff6b01';\n  watchedBtnEl.style.borderColor = '#ff6b01';\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>\";\n    return;\n  }\n  const movieWatched = await readAllUserData(auth.currentUser.uid);\n  if (movieWatched.userDataWatch === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>\";\n\n    return;\n  }\n  if (Object.keys(movieWatched).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>\";\n    return;\n  }\n  const moviesCards = movieWatched.userDataWatch\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nexport async function onQueueBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = '#ff6b01';\n  queueBtnEl.style.borderColor = '#ff6b01';\n\n  watchedBtnEl.style.background = 'transparent';\n  watchedBtnEl.style.borderColor = '#ffffff';\n\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>\";\n    return;\n  }\n  const movieQueue = await readAllUserData(auth.currentUser.uid);\n  if (movieQueue.userDataQueue === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>\";\n    return;\n  }\n  if (Object.keys(movieQueue).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>\";\n    return;\n  }\n\n  const moviesCards = movieQueue.userDataQueue\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n","import {\n  auth,\n  writeUserDataQueue,\n  writeUserDataWatch,\n  currentFilmList,\n  readAllUserData,\n} from './authFireBase.js';\nimport { refs } from './refs';\nimport Notiflix from 'notiflix';\nimport { renderModal } from './render_modal';\nimport { onTrailerBtnClick } from './trailer';\nimport { onWatchedBtnClick } from './my-library-watched-queue/my-library-watched-queue'; //add\nimport { onQueueBtnClick } from './my-library-watched-queue/my-library-watched-queue'; //add\n\nconst { modal, overflow, closeBtn, innerModal, body, sectionLibrary } = refs;\nlet queue;\nlet watched;\nasync function updateVar() {\n  if (auth.currentUser === null) {\n    queue = [];\n    watched = [];\n  } else {\n    const q = await readAllUserData(auth.currentUser.uid);\n    const w = await readAllUserData(auth.currentUser.uid);\n    queue = q.userDataQueue || [];\n    watched = w.userDataWatch || [];\n  }\n}\n\nsetTimeout(() => {\n  updateVar();\n}, 2500);\n\nsectionLibrary.addEventListener('click', showModal);\n\nasync function updateMoviesList() {\n  if (auth.currentUser === null) {\n    const allMoviesListFromStorage = localStorage.getItem('currentFilmList');\n    const allMoviesList = JSON.parse(allMoviesListFromStorage);\n    return allMoviesList;\n  } else {\n    try {\n      const allMoviesListFromStorage = await currentFilmList(\n        auth.currentUser.uid\n      );\n      const allMoviesList = allMoviesListFromStorage.currentFilmList || [];\n      return allMoviesList;\n    } catch {\n      return [];\n    }\n  }\n}\nexport async function showModal(e) {\n  if (e.target.nodeName === 'IMG' || e.target.nodeName === 'SPAN') {\n    innerModal.innerHTML = '';\n    modal.classList.remove('hidden-movie-modal');\n    overflow.classList.remove('hidden-movie-modal');\n    overflow.classList.add('overflow-height');\n    sectionLibrary.removeEventListener('click', showModal);\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id =\n      e.target.nodeName === 'IMG'\n        ? e.target.dataset.id\n        : e.target.closest('li').dataset.id;\n    await createModal(id);\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n    const watchedBtn = document.querySelector('.modal__btn-watched');\n    const queueBtn = document.querySelector('.modal__btn-queue');\n    const watchTrailerBtn = document.querySelector(\n      '.movie-modal__btn-watch-trailer'\n    );\n    if (auth.currentUser !== null) {\n      watchedBtn.addEventListener('click', handleWatched);\n      queueBtn.addEventListener('click', handleQueued);\n    } else {\n      watchedBtn.setAttribute('disabled', 'disabled');\n      queueBtn.setAttribute('disabled', 'disabled');\n    }\n    watchTrailerBtn.addEventListener('click', onTrailerBtnClick);\n  }\n}\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\nfunction closeModal() {\n  modal.classList.add('hidden-movie-modal');\n  overflow.classList.add('hidden-movie-modal');\n  overflow.classList.remove('overflow-height');\n  sectionLibrary.addEventListener('click', showModal);\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nasync function createModal(id) {\n  if (auth.currentUser === null) {\n    const currentList = updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  } else {\n    await updateVar();\n    const currentList = await updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  }\n}\n\nasync function handleWatched(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInWatched = watched.some(film => film.id === movie.id);\n\n  if (e.target.innerText === 'ADD TO WATCHED') {\n    if (!isInWatched) {\n      watched.push(movie);\n      if (auth.currentUser === null) {\n        localStorage.setItem('movieWatched', JSON.stringify(watched));\n        e.target.innerText = 'Remove from watched';\n        const saved = JSON.parse(localStorage.getItem('movieWatched'));\n      } else {\n        await writeUserDataWatch(auth.currentUser.uid, watched);\n        e.target.innerText = 'Remove from watched';\n        const w = await readAllUserData(auth.currentUser.uid);\n        const saved = w.userDataWatch || [];\n      }\n\n      onWatchedBtnClick();\n      Notiflix.Notify.success('Added to watched!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM WATCHED') {\n    watched = watched.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieWatched', JSON.stringify(watched));\n    } else {\n      await writeUserDataWatch(auth.currentUser.uid, watched);\n    }\n    e.target.innerText = 'Add to watched';\n    onWatchedBtnClick();\n    Notiflix.Notify.success('Removed from watched!');\n  }\n}\nasync function handleQueued(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInQueued = queue.some(film => film.id === movie.id);\n  if (e.target.innerText === 'ADD TO QUEUE') {\n    if (!isInQueued) {\n      queue.push(movie);\n      if (auth.currentUser === null)\n        localStorage.setItem('movieQueue', JSON.stringify(queue));\n      else {\n        await writeUserDataQueue(auth.currentUser.uid, queue);\n      }\n      e.target.innerText = 'Remove from queue';\n      onQueueBtnClick();\n      Notiflix.Notify.success('Added to queue!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM QUEUE') {\n    queue = queue.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieQueue', JSON.stringify(queue));\n    } else {\n      await writeUserDataQueue(auth.currentUser.uid, queue);\n    }\n\n    e.target.innerText = 'Add to queue';\n    onQueueBtnClick();\n    Notiflix.Notify.success('Removed from queue!');\n  }\n}\n"],"names":["parcelRequire","$30dc2ddc0d4b38da$var$watchedBtnEl","document","querySelector","$30dc2ddc0d4b38da$var$queueBtnEl","$30dc2ddc0d4b38da$var$movieListEl","async","$30dc2ddc0d4b38da$export$852eb21c65e590aa","$gjiCh","spinnerStart","setTimeout","spinnerStop","style","background","borderColor","$5rZAK","auth","currentUser","innerHTML","movieWatched","readAllUserData","uid","undefined","userDataWatch","Object","keys","length","moviesCards","map","movie","$7bdJN","renderMoviesLibrary","join","$30dc2ddc0d4b38da$export$47c64e1cb6fdbeb7","movieQueue","userDataQueue","page","Math","floor","random","IMG_PATH","films","$2Opyx","default","markup","results","id","poster_path","title","overview","error","console","log","$30dc2ddc0d4b38da$var$defaultLibrary","addEventListener","modal","$f9640db34d3647b8$var$modal","overflow","$f9640db34d3647b8$var$overflow","closeBtn","$f9640db34d3647b8$var$closeBtn","innerModal","$f9640db34d3647b8$var$innerModal","body","$f9640db34d3647b8$var$body","sectionLibrary","$f9640db34d3647b8$var$sectionLibrary","$krGWQ","refs","$f9640db34d3647b8$var$queue","$f9640db34d3647b8$var$watched","$f9640db34d3647b8$var$updateVar","q","w","$f9640db34d3647b8$var$updateMoviesList","allMoviesListFromStorage","localStorage","getItem","JSON","parse","currentFilmList","$f9640db34d3647b8$export$d7e8d4d4450c819c","e","target","nodeName","classList","remove","add","removeEventListener","$f9640db34d3647b8$var$closeModalOnEsc","$f9640db34d3647b8$var$closeModal","$f9640db34d3647b8$var$closeModalOverflow","dataset","closest","currentList","rendered","$1jYKa","renderModal","$f9640db34d3647b8$var$createModal","top","window","scrollY","position","watchedBtn","queueBtn","watchTrailerBtn","$f9640db34d3647b8$var$handleWatched","$f9640db34d3647b8$var$handleQueued","setAttribute","$37v9V","onTrailerBtnClick","currentTarget","code","scrollTo","parseInt","modalEl","poster","genre_ids","genres","release_date","date","vote_average","votes","isInWatched","some","film","innerText","push","setItem","stringify","writeUserDataWatch","$parcel$interopDefault","$7Y9D8","Notify","success","filter","isInQueued","writeUserDataQueue"],"version":3,"file":"library.3d03a4f0.js.map"}