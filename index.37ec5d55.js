!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},r={},s=n.parcelRequired76b;null==s&&((s=function(e){if(e in a)return a[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},n.parcelRequired76b=s),s("iE7OH").register(JSON.parse('{"EVgbq":"index.37ec5d55.js","cYuBg":"desktop-empty-poster.c37d8ef5.jpg","5UbS1":"index.05432eed.css","7nwxg":"library.bfbbb4a6.js"}')),s("9t7bQ"),s("387si");var i=s("bpxeT"),c=s("2TvXO"),o=s("asGRZ"),l=(i=s("bpxeT"),c=s("2TvXO"),s("2B9Fw"));function d(){return(d=e(i)(e(c).mark((function t(){var n,a,r,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.themoviedb.org/3/configuration?api_key=".concat(l.default));case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=a.images,s="".concat(r.secure_base_url).concat(r.profile_sizes[r.profile_sizes.length-1]),e.abrupt("return",s);case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}var u,h,p,g,v,f,_,y,m,w,b,S,E,L=function(){return d.apply(this,arguments)},P={};t(P,"getPaginationModel",(function(){return u}),(function(e){return u=e})),t(P,"ITEM_TYPES",(function(){return h}),(function(e){return h=e})),t(P,"ITEM_KEYS",(function(){return p}),(function(e){return p=e})),g=function(e,t){for(var n=[],a=e;a<=t;a++)n.push(a);return n},v=function(e){return{type:S.ELLIPSIS,key:E.FIRST_ELLIPSIS,value:e,isActive:!1}},f=function(e){return{type:S.ELLIPSIS,key:E.SECOND_ELLIPSIS,value:e,isActive:!1}},_=function(e){var t=e.currentPage;return{type:S.FIRST_PAGE_LINK,key:E.FIRST_PAGE_LINK,value:1,isActive:1===t}},y=function(e){var t=e.currentPage;return{type:S.PREVIOUS_PAGE_LINK,key:E.PREVIOUS_PAGE_LINK,value:Math.max(1,t-1),isActive:1===t}},m=function(e){var t=e.currentPage,n=e.totalPages;return{type:S.NEXT_PAGE_LINK,key:E.NEXT_PAGE_LINK,value:Math.min(n,t+1),isActive:t===n}},w=function(e){var t=e.currentPage,n=e.totalPages;return{type:S.LAST_PAGE_LINK,key:E.LAST_PAGE_LINK,value:n,isActive:t===n}},b=function(e){var t=e.currentPage;return function(e){return{type:S.PAGE,key:e,value:e,isActive:e===t}}},u=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var t=Number(e.totalPages);if(isNaN(t))throw new Error("getPaginationModel(): totalPages should be a number");if(t<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var n=Number(e.currentPage);if(isNaN(n))throw new Error("getPaginationModel(): currentPage should be a number");if(n<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(n>t)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var a=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(a))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(a<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var r=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(r))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(r<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var s=Boolean(e.hidePreviousAndNextPageLinks),i=Boolean(e.hideFirstAndLastPageLinks),c=Boolean(e.hideEllipsis),o=c?0:1,l=[],d=b(e);if(i||l.push(_(e)),s||l.push(y(e)),1+2*o+2*r+2*a>=t){var u=g(1,t).map(d);l.push.apply(l,u)}else{var h=a,p=g(1,h).map(d),S=t+1-a,E=g(S,t).map(d),L=Math.min(Math.max(n-r,h+o+1),S-o-2*r-1),P=L+2*r,x=g(L,P).map(d);if(l.push.apply(l,p),!c){var T=L-1,N=(T===h+1?d:v)(T);l.push(N)}if(l.push.apply(l,x),!c){var A=P+1,k=(A===S-1?d:f)(A);l.push(k)}l.push.apply(l,E)}return s||l.push(m(e)),i||l.push(w(e)),l},h=S={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},p=E={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6};i=s("bpxeT"),c=s("2TvXO");var x,T=s("dTK2M");function N(e){if(!e||""===e)return"<a>Other</a>";var t=e.toLowerCase().indexOf("other"),n="";return-1!==t&&(e=e.slice(0,t),n="Other"),e.split(",").map((function(e){return"<a class='find-by-genre-js trending-gallery__genre-name'>".concat(e,"</a>")})).join(", ")+n}function A(t){var n=t.poster_path;return(n=t.poster_path)&&""!==n?(n=t.poster_path,'\n\t<picture>\n\t\t<source srcset="'.concat(T.default.IMG_BASE_URL,"/w185").concat(t.poster_path," 185w, ").concat(T.default.IMG_BASE_URL,"/w342").concat(t.poster_path," 342w, ").concat(T.default.IMG_BASE_URL,"/w500").concat(t.poster_path,' 500w" media="(max-width: 767px)" sizes="280px">\n\t\t<source srcset="').concat(T.default.IMG_BASE_URL,"/w342").concat(t.poster_path," 342w, ").concat(T.default.IMG_BASE_URL,"/w500").concat(t.poster_path,' 500w" media="(min-width: 768px)" sizes="336px">\n\t\t<source srcset="').concat(T.default.IMG_BASE_URL,"/w500").concat(t.poster_path," 500w, ").concat(T.default.IMG_BASE_URL,"/w780").concat(t.poster_path,' 780w" media="(min-width: 1280px)" sizes="395px">\n\n  \t<img src="').concat(T.default.IMG_BASE_URL,"/original").concat(t.poster_path,'" alt="The poster of ').concat(t.title,' film" class="trending-gallery__image" loading="lazy" data-id="').concat(t.id,'"/>\n\t</picture>')):'<picture>\n  \t<img src="'.concat(e(x),'" alt="The poster of ').concat(t.title,' film" class="trending-gallery__image" loading="lazy" data-id="').concat(t.id,'"/>\n\t</picture>')}function k(e){return e.results.map((function(e){var t=e.overview.length<340?e.overview:"".concat(e.overview.slice(0,340),"..."),n=N(T.default.getGenresString(e.genre_ids));return e.release_date&&""!==e.release_date?e.release_date=e.release_date.slice(0,4):e.release_date="No info","\n\t<li class='trending-gallery__item' data-id=".concat(e.id,">\n    ").concat(A(e),'\n    <div class="trending-gallery__wrapper">\n    \t<h3 class=\'trending-gallery__title\' ><span  class="title-modal-open" data-id=').concat(e.id,">").concat(e.title,"</span>\n\t\t\t</h3>\n    \t<p class='trending-gallery__info'>").concat(N(T.default.getGenresString(e.genre_ids))," | <span class='find-by-year-js'>").concat(e.release_date,'</span></p>\n    </div>\n    <div class="trending-gallery__desc-wrap">\n                    <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="').concat(e.id,'">').concat(e.title,'</span>\n                        </h3>\n                        <p class="trending-gallery__info">').concat(n,'\n                              <span class="find-by-year-js">').concat(e.release_date.slice(0,4),'</span>\n                              </p>\n                        <p class="trending-gallery__desc">').concat(t,'</p>\n                        \n                        <button type="button" class="trending-gallery__btn-more">Read more</button>\n                    </div>\n  </li>\n\t')})).join("")}function I(e,t){return e.results.map((function(e){e.release_date&&""!==e.release_date?e.release_date=e.release_date.slice(0,4):e.release_date="No info";var n=e.overview.length<340?e.overview:"".concat(e.overview.slice(0,340),"..."),a=N(T.default.getGenresStringWithSearchedGenre(e.genre_ids,t));return"\n\t<li class='trending-gallery__item'  data-id=\"".concat(e.id,'">\n    ').concat(A(e),'\n    <div class="trending-gallery__wrapper">\n    \t<h3 class=\'trending-gallery__title\'><span class="title-modal-open">').concat(e.title,"</span></h3>\n    \t<p class='trending-gallery__info'>").concat(a," | <span class='find-by-year-js'>").concat(e.release_date.slice(0,4),'</span></p>\n    </div>\n    <div class="trending-gallery__desc-wrap">\n                    <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="').concat(e.id,'">').concat(e.title,'</span>\n                        </h3>\n                        <p class="trending-gallery__info">').concat(a,'\n                              <span class="find-by-year-js">').concat(e.release_date.slice(0,4),'</span>\n                              </p>\n                        <p class="trending-gallery__desc">').concat(n,'</p>\n                        \n                        <button type="button" class="trending-gallery__btn-more">Read more</button>\n                    </div>\n  </li>\n\t')})).join("")}x=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("cYuBg");var F=s("6JpON"),M=(T=s("dTK2M"),/^\s*$/),B=new(0,T.default);B.fetchGenres();var G={galleryEl:document.querySelector(".trending-gallery"),searchInputEl:document.querySelector(".search__input"),searchForm:document.querySelector(".search"),showAdvancedSearchEl:document.querySelector(".show-advanced-search-js"),hideAdvancedSearchEl:document.querySelector(".hide-advanced-search-js"),advancedSearchEl:document.querySelector(".search--advanced-js "),advancedSearchWrap:document.querySelector(".search--advanced-js div "),advancedSearchChosenWindowEl:document.querySelector(".advanced-search__chosen-window"),advancedSearchChosenEl:document.querySelector(".advanced-search__chosen"),resetAdvancedSearchBtn:document.querySelector(".advanced-search__reset"),advacedSearchSubmitBtn:document.querySelector(".advanced-search__submit"),advacedSearchYearInput:document.querySelector(".advanced-search__year")};function R(){window.scroll({top:0,left:0,behavior:"smooth"})}F=s("6JpON"),i=s("bpxeT"),c=s("2TvXO"),T=s("dTK2M"),F=s("6JpON");s("jtwsr");var O={primary_release_year:"",with_genres:"",sort_by:"",page:"",with_watch_monetization_types:"",without_genres:""},j=!1;function U(){setTimeout((function(){G.advancedSearchEl.classList.remove("visually"),G.showAdvancedSearchEl.parentNode.classList.add("visually-hidden"),G.hideAdvancedSearchEl.parentNode.classList.remove("visually-hidden")}),100),j||H(G.advancedSearchWrap)}function C(){G.advancedSearchEl.classList.toggle("visually"),G.showAdvancedSearchEl.parentNode.classList.toggle("visually-hidden"),G.hideAdvancedSearchEl.parentNode.classList.toggle("visually-hidden")}function H(e){var t=Object.values(T.default.genres).map((function(e){return'<option value="'.concat(e,'" class="advanced-search__option">').concat(e,"</option>")})).join(""),n='\n\t\t<select name="genre"  class="advanced-search__genre advanced-search__select">\n\t\t\t<option value="" class="advanced-search__option--main">Choose genre to find</option>\n\t\t\t'.concat(t,"\n\t\t</select>"),a='\n\t\t<select name="excludeGenre" \n\t\t\tclass="advanced-search__exlude-genre advanced-search__select">\n\t\t\t<option value="" class="advanced-search__option--main">Choose genre to exlude</option>\n\t\t\t'.concat(t,"\n\t\t</select>"),r='\n\t\t<select name="sortParams" \t\tclass="advanced-search__sort-buy advanced-search__select">\n\t\t\t<option value="" class="advanced-search__option--main">Choose sorting parameter</option>\n\t\t\t'.concat(Object.keys(T.default.sort_by_types).map((function(e){return'<option value="'.concat(e,'" class="advanced-search__option">').concat(T.default.sort_by_types[e],"</option>")})).join(""),"\n\t\t</select>");e.insertAdjacentHTML("afterbegin",n+a+r),j=!0}function D(e){B.fetchAdvancedMovieSearch(e).then((function(e){var t=e.data;R(),G.galleryEl.innerHTML=k(e.data),X.isTrendingFilmsShown=!1,X.isFilmsByQueryShown=!1,X.isFilmsByAdvancedSearchShown=!0,X.isFilmsByYearShown=!1,X.isFilmsByGenreShown=!1,t.total_pages>500?V.totalPages=500:V.totalPages=t.total_pages,ce(B.page,V.totalPages)})).catch(console.error)}function q(){G.advancedSearchEl.reset()}function K(){return Y.apply(this,arguments)}function Y(){return(Y=e(i)(e(c).mark((function t(){return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(),X.isFilmsByYearShown=!1,X.isFilmsByGenreShown=!1,X.isFilmsByQueryShown=!1,X.isFilmsByAdvancedSearchShown=!1,X.isTrendingFilmsShown=!0,G.advancedSearchChosenWindowEl.classList.add("visually-hidden"),e.next=9,se(1);case 9:case"end":return e.stop()}}),t)})))).apply(this,arguments)}G.searchForm.addEventListener("click",(function(e){if(!e.target.classList.value.includes("show-advanced-search-js"))return;!function(){if(setTimeout((function(){return C()}),100),j)return;H(G.advancedSearchWrap)}()})),G.searchForm.addEventListener("click",(function(e){if(!e.target.classList.value.includes("hide-advanced-search-js"))return;C()})),G.advancedSearchEl.addEventListener("submit",(function(e){e.preventDefault();var t={with_genres:T.default.genreIDs[G.advancedSearchEl.genre.value],without_genres:T.default.genreIDs[G.advancedSearchEl.excludeGenre.value],sort_by:T.default.sort_by_types[G.advancedSearchEl.sortParams.value],with_watch_monetization_types:T.default.watch_monetization_types[G.advancedSearchEl.monetization.value]};if(!function(e){var t=!1;return""!==G.advancedSearchEl.year.value||(Object.values(e).forEach((function(e){void 0===e||M.test(e)||(t=!0)})),t)}(t))return void F.Notify.failure("Choose some parameters!");B.page=1,X.isFilmsByYearShown=!0;var n=G.advancedSearchEl.year.value;if(!function(e){return""===e||!!((e=Number.parseInt(e))&&e>1880&&e<=(new Date).getFullYear())}(n))return F.Notify.failure("The year chosen is ineligible!"),void q();t.primary_release_year=n;var a=!0;if(Object.keys(t).forEach((function(e){t[e]!==O[e]&&(a=!1)})),t.with_genres===t.without_genres&&void 0!==t.with_genres&&void 0!==t.without_genres)return F.Notify.failure("You can't choose and exclude the same genre!"),void q();if(a)return F.Notify.warning("Please,make changes in search params and try again"),void q();t.page=B.page,O.with_genres=t.with_genres,O.without_genres=t.without_genres,O.sort_by=t.sort_by,O.primary_release_year=t.primary_release_year,O.with_watch_monetization_types=t.with_watch_monetization_types,O.page=t.page,ie(),q(),F.Notify.info("Searching"),r=O,G.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),G.advancedSearchChosenEl.innerHTML="".concat(function(e){return Object.keys(e).reduce((function(t,n){return e[n]&&""!==e[n]&&"page"!==n?"with_genres"===n||"without_genres"===n?t+"<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>".concat(n.split("_").join(" "),": </span>").concat(T.default.genres[e[n]],"</div>"):t+"<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>".concat(n.split("_").join(" "),": </span>").concat(e[n],"</div>"):t}),"")}(r)),D(t);var r})),G.resetAdvancedSearchBtn.addEventListener("click",K),window.onResetAdvancedSearch=function(){K()};var Q={userQueryForPagination:"",userYearForPagination:"",userGenreForPagination:""};function W(){return(W=e(i)(e(c).mark((function t(n){var a,r,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),ie(),G.advancedSearchChosenWindowEl.classList.add("visually-hidden"),a=G.searchInputEl.value,Q.userQueryForPagination=a,G.searchInputEl.value="",!M.test(a)){e.next=8;break}return e.abrupt("return");case 8:return e.prev=8,B.page=1,e.next=12,B.fetchFilmsByQuery(a);case 12:if(r=e.sent,0!==(s=r.data).total_results){e.next=18;break}return F.Notify.failure("Search result not successful. Enter the correct movie name and try again!"),se(1),e.abrupt("return");case 18:R(),G.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),G.advancedSearchChosenEl.innerHTML="<div class='advanced-search__chosen-option'>\n    <span class='advanced-search__search-key'>search word: </span>".concat(a,'\n     <button class="advanced-search__reset advanced-search__key-reset" type="button" onclick=\'onResetAdvancedSearch()\'>Reset</button>\n     </div>'),G.galleryEl.innerHTML=k(s),X.isTrendingFilmsShown=!1,X.isFilmsByGenreShown=!1,X.isFilmsByYearShown=!1,X.isFilmsByAdvancedSearchShown=!1,X.isFilmsByQueryShown=!0,V.totalPages=s.total_pages,ce(B.page,V.totalPages),e.next=34;break;case 31:e.prev=31,e.t0=e.catch(8),console.error(e.t0);case 34:case"end":return e.stop()}}),t,null,[[8,31]])})))).apply(this,arguments)}G.searchForm.addEventListener("submit",(function(e){return W.apply(this,arguments)}));var J=s("kvC6y"),z=s("4Nugj"),X=(T=s("dTK2M"),T=s("dTK2M"),{isTrendingFilmsShown:!0,isFilmsByQueryShown:!1,isFilmsByYearShown:!1,isFilmsByGenreShown:!1,isFilmsByAdvancedSearchShown:!1}),V={currentPage:0,totalPages:0,boundaryPagesRange:1,siblingPagesRange:2,hideEllipsis:!1,hidePreviousAndNextPagebtns:!1,hideFirstAndLastPagebtns:!0},Z=window.matchMedia("(max-width: 767px)");ue(Z.matches),Z.addEventListener("change",(function(){var e=V.currentPage,t=V.totalPages;ue(Z.matches),ce(e,t)}));var $=document.querySelector(".trending-gallery");function ee(e){return te.apply(this,arguments)}function te(){return(te=e(i)(e(c).mark((function t(n){var a,r,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L();case 3:return a=e.sent,r=T.default.genres,s=n.map((function(e){var t=e.overview.length<340?e.overview:"".concat(e.overview.slice(0,340),"..."),n="",s=ne(e,r);return n=s.length>2?"<a class='find-by-genre-js trending-gallery__genre-name'>".concat(s[0],"</a>, <a class='find-by-genre-js trending-gallery__genre-name'>").concat(s[1],"</a>, Other | "):2===s.length?"<a class='find-by-genre-js trending-gallery__genre-name'>".concat(s[0],"</a>, <a class='find-by-genre-js trending-gallery__genre-name'>").concat(s[1],"</a> | "):1===s.length?"<a class='find-by-genre-js trending-gallery__genre-name'>".concat(s,"</a> | "):s,'<li class="trending-gallery__item" data-id="'.concat(e.id,'">\n                  \n                    <div>\n                        <img src="').concat(a).concat(e.poster_path,'"\n                            class="trending-gallery__image" data-id="').concat(e.id,'"\n                            alt="The poster of ').concat(e.title,' film " onerror="this.onerror=null;this.src=\'https://images.unsplash.com/photo-1616530940355-351fabd9524b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1935&q=80\';"\n                            />\n\n                    </div>            \n                    <div class="trending-gallery__wrapper">\n                        <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="').concat(e.id,'">').concat(e.title,'</span>\n                        </h3>\n                              <p class="trending-gallery__info">').concat(n,'\n                              <span class="find-by-year-js">').concat(e.release_date.slice(0,4),'</span>\n                              </p>\n                    </div>\n                    <div class="trending-gallery__desc-wrap">\n                    <h3 class="trending-gallery__title" ><span class="title-modal-open" data-id="').concat(e.id,'">').concat(e.title,'</span>\n                        </h3>\n                        <p class="trending-gallery__info">').concat(n,'\n                              <span class="find-by-year-js">').concat(e.release_date.slice(0,4),'</span>\n                              </p>\n                        <p class="trending-gallery__desc">').concat(t,'</p>\n                        \n                        <button type="button" class="trending-gallery__btn-more">Read more</button>\n                    </div>\n                  \n                </li>')})).join(""),e.abrupt("return",s);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function ne(e,t){return e.genre_ids.map((function(e){return t[e]}))}function ae(e){return re.apply(this,arguments)}function re(){return(re=e(i)(e(c).mark((function t(n){var a,r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,$.innerHTML="",(0,J.spinnerStart)(),e.next=5,(0,o.default)(n);case 5:return a=e.sent,e.next=8,ee(a.results);case 8:r=e.sent,$.innerHTML=r,V.totalPages=a.total_pages,X.isTrendingFilmsShown=!0,a&&ce(n,V.totalPages),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.dir(e.t0);case 18:return e.prev=18,setTimeout((function(){(0,J.spinnerStop)()}),1e3),e.finish(18);case 21:case"end":return e.stop()}}),t,null,[[0,15,18,21]])})))).apply(this,arguments)}ae(1);var se=ae;function ie(){z.refs.paginationContainer.removeEventListener("click",oe),z.refs.filmsPaginationContainer.innerHTML=""}function ce(t,n){z.refs.filmsPaginationContainer.innerHTML=function(t,n){V.currentPage=t,V.totalPages=n;var a=e(P).getPaginationModel(V).map(de).join("");return'<ul class="pagination__container">'.concat(a,"</ul>")}(t,n),z.refs.paginationContainer=document.querySelector(".pagination__container"),z.refs.paginationContainer.addEventListener("click",oe)}function oe(e){return le.apply(this,arguments)}function le(){return(le=e(i)(e(c).mark((function t(n){var a,r,s,i,o,l,d,u;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("BUTTON"===n.target.nodeName){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,ie(),a=n.target,r=Number(a.dataset.value),!X.isTrendingFilmsShown){e.next=14;break}return e.next=9,ae(r);case 9:return R(),(0,J.spinnerStart)(),e.abrupt("return");case 14:if(!X.isFilmsByQueryShown){e.next=27;break}return B.page=r,e.next=18,B.fetchFilmsByQuery(Q.userQueryForPagination);case 18:return s=e.sent,R(),(0,J.spinnerStart)(),i=s.data,G.galleryEl.innerHTML=k(i),ce(B.page,V.totalPages),e.abrupt("return");case 27:if(!X.isFilmsByYearShown){e.next=40;break}return B.page=r,e.next=31,B.fetchMoviesByYear(Q.userYearForPagination);case 31:return o=e.sent,R(),(0,J.spinnerStart)(),l=o.data,G.galleryEl.innerHTML=k(l),ce(B.page,V.totalPages),e.abrupt("return");case 40:if(!X.isFilmsByGenreShown){e.next=53;break}return B.page=r,e.next=44,B.fetchMoviesByGenre(Q.userGenreForPagination);case 44:return d=e.sent,R(),(0,J.spinnerStart)(),u=d.data,G.galleryEl.innerHTML=k(u),ce(B.page,V.totalPages),e.abrupt("return");case 53:if(!X.isFilmsByAdvancedSearchShown){e.next=60;break}return O.page=r,B.page=r,R(),(0,J.spinnerStart)(),G.galleryEl.innerHTML=D(O),e.abrupt("return");case 60:e.next=65;break;case 62:e.prev=62,e.t0=e.catch(2),console.log(e.t0);case 65:return e.prev=65,setTimeout(J.spinnerStop,500),e.finish(65);case 68:case"end":return e.stop()}}),t,null,[[2,62,65,68]])})))).apply(this,arguments)}function de(e){var t,n=e.type,a=e.value,r=e.isActive;e.key;switch(n){case"PREVIOUS_PAGE_LINK":return t="--prev",r?he(t,a,"disabled"):he(t,a);case"NEXT_PAGE_LINK":return t="--next",r?he(t,a,"disabled"):he(t,a);case"ELLIPSIS":return he(t="--ellipsis",a);case"PAGE":return function(e,t,n,a){return n?' <li class="pagination__element">\n          <button type="button" class="pagination__btn pagination__btn'.concat(e,'" data-value=').concat(t," ").concat(a,">").concat(t,"</button>\n        </li>"):' <li class="pagination__element">\n       <button type="button" class="pagination__btn" data-value='.concat(t,">").concat(t,"</button>\n     </li>")}(t="--active",a,r,"disabled")}}function ue(e){e?(V.boundaryPagesRange=0,V.hideEllipsis=!0):(V.boundaryPagesRange=1,V.hideEllipsis=!1)}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return' <li class="pagination__element">\n          <button type="button" class="pagination__btn pagination__btn'.concat(e,'" data-value=').concat(t," ").concat(n,"></button>\n        </li>")}s("iSEZc");i=s("bpxeT"),c=s("2TvXO");var pe,ge,ve=s("9t7bQ"),fe=(z=s("4Nugj"),F=s("6JpON"),s("h9dm7")),_e=s("cDXQO"),ye=z.refs.allCardsSection,me=z.refs.modal,we=z.refs.overflow,be=z.refs.closeBtn,Se=z.refs.innerModal,Ee=z.refs.body;function Le(){return Pe.apply(this,arguments)}function Pe(){return(Pe=e(i)(e(c).mark((function t(){var n,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ve.auth.currentUser){e.next=4;break}pe=[],ge=[],e.next=12;break;case 4:return e.next=6,(0,ve.readAllUserData)(ve.auth.currentUser.uid);case 6:return n=e.sent,e.next=9,(0,ve.readAllUserData)(ve.auth.currentUser.uid);case 9:a=e.sent,pe=n.userDataQueue||[],ge=a.userDataWatch||[];case 12:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function xe(){return Te.apply(this,arguments)}function Te(){return(Te=e(i)(e(c).mark((function t(){var n,a,r,s;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ve.auth.currentUser){e.next=6;break}return n=localStorage.getItem("currentFilmList"),a=JSON.parse(n),e.abrupt("return",a);case 6:return e.prev=6,e.next=9,(0,ve.currentFilmList)(ve.auth.currentUser.uid);case 9:return r=e.sent,s=r.currentFilmList||[],e.abrupt("return",s);case 14:return e.prev=14,e.t0=e.catch(6),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),t,null,[[6,14]])})))).apply(this,arguments)}function Ne(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=e(i)(e(c).mark((function t(n){var a,r,s,i,o;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("IMG"!==n.target.nodeName&&"title-modal-open"!==n.target.className&&"trending-gallery__btn-more"!==n.target.className){t.next=20;break}return Se.innerHTML="",me.classList.remove("hidden-movie-modal"),we.classList.remove("hidden-movie-modal"),we.classList.add("overflow-height"),ye.removeEventListener("click",Ne),document.addEventListener("keydown",Ie),be.addEventListener("click",Fe),we.addEventListener("click",ke),a="IMG"===n.target.nodeName?n.target.dataset.id:n.target.closest("li").dataset.id,t.next=12,Me(a);case 12:r=window.scrollY,Ee.style.position="fixed",Ee.style.top="-".concat(r,"px"),s=document.querySelector(".modal__btn-watched"),i=document.querySelector(".modal__btn-queue"),o=document.querySelector(".movie-modal__btn-watch-trailer"),null!==ve.auth.currentUser?(s.addEventListener("click",Ge),i.addEventListener("click",Oe)):(s.setAttribute("disabled","disabled"),i.setAttribute("disabled","disabled"),e(F).Notify.info("Log in and you will have the opportunity to create your own movies library")),o.addEventListener("click",_e.onTrailerBtnClick);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ke(e){e.currentTarget===e.target&&Fe()}function Ie(e){"Escape"===e.code&&Fe()}function Fe(){me.classList.add("hidden-movie-modal"),we.classList.add("hidden-movie-modal"),we.classList.remove("overflow-height"),ye.addEventListener("click",Ne),document.removeEventListener("keydown",Fe),be.removeEventListener("click",Fe),we.removeEventListener("click",ke);var e=Ee.style.top;Ee.style.position="",Ee.style.top="",window.scrollTo(0,-1*parseInt(e||"0"))}function Me(e){return Be.apply(this,arguments)}function Be(){return(Be=e(i)(e(c).mark((function t(n){var a,r,s,i;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ve.auth.currentUser){e.next=8;break}return a=xe(),e.next=4,(0,fe.renderModal)(a,n,ge,pe);case 4:r=e.sent,Se.innerHTML=r,e.next=17;break;case 8:return e.next=10,Le();case 10:return e.next=12,xe();case 12:return s=e.sent,e.next=15,(0,fe.renderModal)(s,n,ge,pe);case 15:i=e.sent,Se.innerHTML=i;case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function Ge(e){return Re.apply(this,arguments)}function Re(){return(Re=e(i)(e(c).mark((function t(n){var a,r,s,i;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=document.querySelector(".movie-modal__main"),r={poster_path:a.dataset.poster,title:a.dataset.title,genre_ids:a.dataset.genres,release_date:a.dataset.date,vote_average:a.dataset.votes,id:a.dataset.id},s=ge.some((function(e){return e.id===r.id})),"ADD TO WATCHED"!==n.target.innerText){t.next=20;break}if(s){t.next=18;break}if(ge.push(r),null!==ve.auth.currentUser){t.next=10;break}localStorage.setItem("movieWatched",JSON.stringify(ge)),n.target.innerText="Remove from watched",JSON.parse(localStorage.getItem("movieWatched")),t.next=17;break;case 10:return t.next=12,(0,ve.writeUserDataWatch)(ve.auth.currentUser.uid,ge);case 12:return n.target.innerText="Remove from watched",t.next=15,(0,ve.readAllUserData)(ve.auth.currentUser.uid);case 15:i=t.sent,i.userDataWatch||[];case 17:e(F).Notify.success("Added to watched!");case 18:t.next=30;break;case 20:if("REMOVE FROM WATCHED"!==n.target.innerText){t.next=30;break}if(ge=ge.filter((function(e){return e.id!==r.id})),null!==ve.auth.currentUser){t.next=26;break}localStorage.setItem("movieWatched",JSON.stringify(ge)),t.next=28;break;case 26:return t.next=28,(0,ve.writeUserDataWatch)(ve.auth.currentUser.uid,ge);case 28:n.target.innerText="Add to watched",e(F).Notify.success("Removed from watched!");case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oe(e){return je.apply(this,arguments)}function je(){return(je=e(i)(e(c).mark((function t(n){var a,r,s;return e(c).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=document.querySelector(".movie-modal__main"),r={poster_path:a.dataset.poster,title:a.dataset.title,genre_ids:a.dataset.genres,release_date:a.dataset.date,vote_average:a.dataset.votes,id:a.dataset.id},s=pe.some((function(e){return e.id===r.id})),"ADD TO QUEUE"!==n.target.innerText){t.next=16;break}if(s){t.next=14;break}if(pe.push(r),null!==ve.auth.currentUser){t.next=10;break}localStorage.setItem("movieQueue",JSON.stringify(pe)),t.next=12;break;case 10:return t.next=12,(0,ve.writeUserDataQueue)(ve.auth.currentUser.uid,pe);case 12:n.target.innerText="Remove from queue",e(F).Notify.success("Added to queue!");case 14:t.next=26;break;case 16:if("REMOVE FROM QUEUE"!==n.target.innerText){t.next=26;break}if(pe=pe.filter((function(e){return e.id!==r.id})),null!==ve.auth.currentUser){t.next=22;break}localStorage.setItem("movieQueue",JSON.stringify(pe)),t.next=24;break;case 22:return t.next=24,(0,ve.writeUserDataQueue)(ve.auth.currentUser.uid,pe);case 24:n.target.innerText="Add to queue",e(F).Notify.success("Removed from queue!");case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}setTimeout((function(){Le()}),2500),ye.addEventListener("click",Ne),s("9S1Ph");var Ue=s("8nrFW");F=s("6JpON");G.galleryEl.addEventListener("click",(function(t){if(!e(Ue)(t.target.classList).includes("find-by-year-js"))return;if(X.isFilmsByYearShown)return void F.Notify.info("Movies of this year are already shown");ie(),R();var n=Number(t.target.innerText);Q.userQueryForPagination="",Q.userYearForPagination=n,B.page=1,B.fetchMoviesByYear(n).then((function(e){var t=e.data;0===t.total_results&&F.Notify.failure("Search result not successful."),R(),G.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),G.advancedSearchChosenEl.innerHTML="<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>primary release year: </span>".concat(n,"</div>"),U(),G.advacedSearchYearInput.value=n,G.galleryEl.innerHTML=k(t),X.isTrendingFilmsShown=!1,X.isFilmsByQueryShown=!1,X.isFilmsByGenreShown=!1,X.isFilmsByAdvancedSearchShown=!1,X.isFilmsByYearShown=!0,t.total_pages>500?V.totalPages=500:V.totalPages=t.total_pages,ce(B.page,V.totalPages)})).catch((function(e){console.error(e),F.Notify.failure("No films with such year found!")}))}));var Ce;Ue=s("8nrFW"),T=s("dTK2M"),F=s("6JpON");G.galleryEl.addEventListener("click",(function(t){X.isFilmsByAdvancedSearchShown&&G.advancedSearchEl.reset();if(!e(Ue)(t.target.classList).includes("find-by-genre-js"))return;var n=t.target.innerText.trim();","===n[n.length-1]&&(n=n.slice(0,-1));if(Ce===T.default.genreIDs[n.toLowerCase()]&&!0===X.isFilmsByGenreShown)return void F.Notify.info("Movies of this genre are already shown");Ce=T.default.genreIDs[n.toLowerCase()],ie(),Q.userGenreForPagination=Ce,B.page=1,B.fetchMoviesByGenre("".concat(T.default.genreIDs[n.toLowerCase()])).then((function(e){var t=e.data;0===t.total_results&&F.Notify.failure("Search result not successful."),R(),G.advancedSearchChosenWindowEl.classList.remove("visually-hidden"),G.advancedSearchChosenEl.innerHTML="<div class='advanced-search__chosen-option'><span class='advanced-search__search-key'>genre: </span>".concat(n.toLowerCase(),"</div>"),U(),function(e){var t=document.querySelector(".advanced-search__genre");t.value=e,Array.from(t.options).find((function(t){return t.label===e.toLowerCase()})).selected=!0}(n),G.galleryEl.innerHTML=I(t,n),X.isTrendingFilmsShown=!1,X.isFilmsByQueryShown=!1,X.isFilmsByAdvancedSearchShown=!1,X.isFilmsByYearShown=!1,X.isFilmsByGenreShown=!0,t.total_pages>500?V.totalPages=500:V.totalPages=t.total_pages,ce(B.page,V.totalPages)})).catch((function(e){console.error(e),F.Notify.failure("No films with such genre found!")}))})),s("387si"),s("jtwsr")}();
//# sourceMappingURL=index.37ec5d55.js.map
