{"mappings":"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","sources":["src/library.js","src/js/features/my-library-watched-queue/my-library-watched-queue.js","src/js/components/modal/movie_modal-library.js"],"sourcesContent":["import './js/auth/authFireBase.js';\nimport './js/components/modal/openModalWindow.js';\nimport './js/features/my-library-watched-queue/my-library-watched-queue';\nimport './js/features/dark-mode';\nimport { spinnerStart, spinnerStop } from './js/features/loader';\nimport './js/features/scroll_to_top';\nimport './js/components/modal/movie_modal-library.js';\nimport './js/components/modal/openModalWindow.js';\nimport './js/components/header/canvas-header.js';\nspinnerStart();\nsetTimeout(spinnerStop, 1000);","import Notiflix from 'notiflix';\nimport { renderMoviesLibrary } from './renderMoviesLibrary';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport fetchPopularFilms from '../trending-search-main/fetch-movies';\nimport { readAllUserData, currentUID, auth } from '../../auth/authFireBase.js';\nimport { async } from '@firebase/util';\n\nconst watchedBtnEl = document.querySelector('.js-library-btn--watched');\nconst queueBtnEl = document.querySelector('.js-library-btn--queue');\nconst movieListEl = document.querySelector('.movie-list');\n\nasync function defaultLibrary() {\n  const minPage = 1;\n  const maxPage = 100;\n  let page = Math.floor(Math.random() * (maxPage - minPage + 1) + minPage);\n  try {\n    const IMG_PATH = 'https://image.tmdb.org/t/p/original';\n    movieListEl.innerHTML = '';\n    const films = await fetchPopularFilms(page);\n\n    const markup = `<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' data-id='${films.results[1].id}' src=${IMG_PATH}${films.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[1].overview}</p></div>\n    </div>\n\n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[2].poster_path} data-id='${films.results[2].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[2].overview}</p></div>\n    </div>\n\n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[3].poster_path} data-id='${films.results[3].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[3].overview}</p></div>\n    </div>`;\n\n    movieListEl.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\ndefaultLibrary();\nexport async function onWatchedBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = 'transparent';\n  queueBtnEl.style.borderColor = '#ffffff';\n\n  watchedBtnEl.style.background = '#ff6b01';\n  watchedBtnEl.style.borderColor = '#ff6b01';\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>\";\n    return;\n  }\n  const movieWatched = await readAllUserData(auth.currentUser.uid);\n  if (movieWatched.userDataWatch === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>\";\n\n    return;\n  }\n  if (Object.keys(movieWatched).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>It seems you haven't watched any movie. You should try, it's funðŸŽ­</p>\";\n    return;\n  }\n  const moviesCards = movieWatched.userDataWatch\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nexport async function onQueueBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = '#ff6b01';\n  queueBtnEl.style.borderColor = '#ff6b01';\n\n  watchedBtnEl.style.background = 'transparent';\n  watchedBtnEl.style.borderColor = '#ffffff';\n\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>\";\n    return;\n  }\n  const movieQueue = await readAllUserData(auth.currentUser.uid);\n  if (movieQueue.userDataQueue === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>\";\n    return;\n  }\n  if (Object.keys(movieQueue).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>The queue is empty. Add all Harry Potter movies - you won't regret thisâœ¨</p>\";\n    return;\n  }\n\n  const moviesCards = movieQueue.userDataQueue\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n","import {\n  auth,\n  writeUserDataQueue,\n  writeUserDataWatch,\n  currentFilmList,\n  readAllUserData,\n} from '../../auth/authFireBase.js';\nimport { refs } from '../../utils/refs';\nimport Notiflix from 'notiflix';\nimport { renderModal } from './render_modal';\nimport { onTrailerBtnClick } from '../../features/trailer';\nimport { onWatchedBtnClick } from '../../features/my-library-watched-queue/my-library-watched-queue'; //add\nimport { onQueueBtnClick } from '../../features/my-library-watched-queue/my-library-watched-queue'; //add\n\nconst { modal, overflow, closeBtn, innerModal, body, sectionLibrary } = refs;\nlet queue;\nlet watched;\nasync function updateVar() {\n  if (auth.currentUser === null) {\n    queue = [];\n    watched = [];\n  } else {\n    const q = await readAllUserData(auth.currentUser.uid);\n    const w = await readAllUserData(auth.currentUser.uid);\n    queue = q.userDataQueue || [];\n    watched = w.userDataWatch || [];\n  }\n}\n\nsetTimeout(() => {\n  updateVar();\n}, 2500);\n\nsectionLibrary.addEventListener('click', showModal);\n\nasync function updateMoviesList() {\n  if (auth.currentUser === null) {\n    const allMoviesListFromStorage = localStorage.getItem('currentFilmList');\n    const allMoviesList = JSON.parse(allMoviesListFromStorage);\n    return allMoviesList;\n  } else {\n    try {\n      const allMoviesListFromStorage = await currentFilmList(\n        auth.currentUser.uid\n      );\n      const allMoviesList = allMoviesListFromStorage.currentFilmList || [];\n      return allMoviesList;\n    } catch {\n      return [];\n    }\n  }\n}\nexport async function showModal(e) {\n  if (e.target.nodeName === 'IMG' || e.target.nodeName === 'SPAN') {\n    const main = document.querySelector('main');\n    const mainHeight = main.offsetHeight;\n    innerModal.innerHTML = '';\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n    main.style.height = `${mainHeight}px`;\n    modal.classList.remove('hidden-movie-modal');\n    overflow.classList.remove('hidden-movie-modal');\n    overflow.classList.add('overflow-height');\n    sectionLibrary.removeEventListener('click', showModal);\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id =\n      e.target.nodeName === 'IMG'\n        ? e.target.dataset.id\n        : e.target.closest('li').dataset.id;\n    await createModal(id);\n    // const top = window.scrollY;\n    // body.style.position = 'fixed';\n    // body.style.top = `-${top}px`;\n    // main.style.height = `${mainHeight}px`;\n    const watchedBtn = document.querySelector('.modal__btn-watched');\n    const queueBtn = document.querySelector('.modal__btn-queue');\n    const watchTrailerBtn = document.querySelector(\n      '.movie-modal__btn-watch-trailer'\n    );\n    if (auth.currentUser !== null) {\n      watchedBtn.addEventListener('click', handleWatched);\n      queueBtn.addEventListener('click', handleQueued);\n    } else {\n      watchedBtn.setAttribute('disabled', 'disabled');\n      queueBtn.setAttribute('disabled', 'disabled');\n    }\n    watchTrailerBtn.addEventListener('click', onTrailerBtnClick);\n  }\n}\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\nfunction closeModal() {\n  const main = document.querySelector('main');\n  modal.classList.add('hidden-movie-modal');\n  overflow.classList.add('hidden-movie-modal');\n  overflow.classList.remove('overflow-height');\n  sectionLibrary.addEventListener('click', showModal);\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  main.style.height = `auto`;\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nasync function createModal(id) {\n  if (auth.currentUser === null) {\n    const currentList = updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  } else {\n    await updateVar();\n    const currentList = await updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  }\n}\n\nasync function handleWatched(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInWatched = watched.some(film => film.id === movie.id);\n\n  if (e.target.innerText === 'ADD TO WATCHED') {\n    if (!isInWatched) {\n      watched.push(movie);\n      if (auth.currentUser === null) {\n        localStorage.setItem('movieWatched', JSON.stringify(watched));\n        e.target.innerText = 'Remove from watched';\n        const saved = JSON.parse(localStorage.getItem('movieWatched'));\n      } else {\n        await writeUserDataWatch(auth.currentUser.uid, watched);\n        e.target.innerText = 'Remove from watched';\n        const w = await readAllUserData(auth.currentUser.uid);\n        const saved = w.userDataWatch || [];\n      }\n\n      onWatchedBtnClick();\n      Notiflix.Notify.success('Added to watched!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM WATCHED') {\n    watched = watched.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieWatched', JSON.stringify(watched));\n    } else {\n      await writeUserDataWatch(auth.currentUser.uid, watched);\n    }\n    e.target.innerText = 'Add to watched';\n    onWatchedBtnClick();\n    Notiflix.Notify.success('Removed from watched!');\n  }\n}\nasync function handleQueued(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInQueued = queue.some(film => film.id === movie.id);\n  if (e.target.innerText === 'ADD TO QUEUE') {\n    if (!isInQueued) {\n      queue.push(movie);\n      if (auth.currentUser === null)\n        localStorage.setItem('movieQueue', JSON.stringify(queue));\n      else {\n        await writeUserDataQueue(auth.currentUser.uid, queue);\n      }\n      e.target.innerText = 'Remove from queue';\n      onQueueBtnClick();\n      Notiflix.Notify.success('Added to queue!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM QUEUE') {\n    queue = queue.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieQueue', JSON.stringify(queue));\n    } else {\n      await writeUserDataQueue(auth.currentUser.uid, queue);\n    }\n\n    e.target.innerText = 'Add to queue';\n    onQueueBtnClick();\n    Notiflix.Notify.success('Removed from queue!');\n  }\n}\n"],"names":["parcelRequire","$d643e9097157022e$var$watchedBtnEl","document","querySelector","$d643e9097157022e$var$queueBtnEl","$d643e9097157022e$var$movieListEl","async","$d643e9097157022e$export$852eb21c65e590aa","$jvfpm","spinnerStart","setTimeout","spinnerStop","style","background","borderColor","$bNVdC","auth","currentUser","innerHTML","movieWatched","readAllUserData","uid","undefined","userDataWatch","Object","keys","length","moviesCards","map","movie","$hEUY5","renderMoviesLibrary","join","$d643e9097157022e$export$47c64e1cb6fdbeb7","movieQueue","userDataQueue","page","Math","floor","random","IMG_PATH","films","$OqxB6","default","markup","results","id","poster_path","title","overview","error","console","log","$d643e9097157022e$var$defaultLibrary","addEventListener","modal","$b73915c2e07aadc3$var$modal","overflow","$b73915c2e07aadc3$var$overflow","closeBtn","$b73915c2e07aadc3$var$closeBtn","innerModal","$b73915c2e07aadc3$var$innerModal","body","$b73915c2e07aadc3$var$body","sectionLibrary","$b73915c2e07aadc3$var$sectionLibrary","$bGr86","refs","$b73915c2e07aadc3$var$queue","$b73915c2e07aadc3$var$watched","$b73915c2e07aadc3$var$updateVar","q","w","$b73915c2e07aadc3$var$updateMoviesList","allMoviesListFromStorage","localStorage","getItem","JSON","parse","currentFilmList","$b73915c2e07aadc3$export$d7e8d4d4450c819c","e","target","nodeName","main","mainHeight","offsetHeight","top","window","scrollY","position","height","classList","remove","add","removeEventListener","$b73915c2e07aadc3$var$closeModalOnEsc","$b73915c2e07aadc3$var$closeModal","$b73915c2e07aadc3$var$closeModalOverflow","dataset","closest","currentList","rendered","$93BCG","renderModal","$b73915c2e07aadc3$var$createModal","watchedBtn","queueBtn","watchTrailerBtn","$b73915c2e07aadc3$var$handleWatched","$b73915c2e07aadc3$var$handleQueued","setAttribute","$1bahx","onTrailerBtnClick","currentTarget","code","scrollTo","parseInt","modalEl","poster","genre_ids","genres","release_date","date","vote_average","votes","isInWatched","some","film","innerText","push","setItem","stringify","writeUserDataWatch","$parcel$interopDefault","$7Y9D8","Notify","success","filter","isInQueued","writeUserDataQueue"],"version":3,"file":"library.0b7607f9.js.map"}