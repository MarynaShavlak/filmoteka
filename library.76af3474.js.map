{"mappings":"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","sources":["src/library.js","src/js/my-library-watched-queue/my-library-watched-queue.js","src/js/movie_modal-library.js"],"sourcesContent":["import './js/authFireBase.js';\nimport './js/openModalWindow.js';\nimport './js/my-library-watched-queue/my-library-watched-queue';\nimport './js/dark-mode';\nimport { spinnerStart, spinnerStop } from './js/loader';\nspinnerStart();\nsetTimeout(spinnerStop, 1000);\nimport './js/scroll_to_top';\nimport './js/movie_modal-library.js';\nimport './js/openModalWindow.js';\nimport './js/canvas-header.js';\n","import Notiflix from 'notiflix';\nimport { renderMoviesLibrary } from './renderMoviesLibrary';\nimport { spinnerStart, spinnerStop } from '../loader';\nimport fetchPopularFilms from '../trending-search-main/fetch-movies';\nimport { readAllUserData, currentUID, auth } from '../authFireBase.js';\nimport { async } from '@firebase/util';\n\nconst watchedBtnEl = document.querySelector('.js-library-btn--watched');\nconst queueBtnEl = document.querySelector('.js-library-btn--queue');\nconst movieListEl = document.querySelector('.movie-list');\n\nasync function defaultLibrary() {\n  const minPage = 1;\n  const maxPage = 100;\n  let page = Math.floor(Math.random() * (maxPage - minPage + 1) + minPage);\n  try {\n    const IMG_PATH = 'https://image.tmdb.org/t/p/original';\n    movieListEl.innerHTML = '';\n    const films = await fetchPopularFilms(page);\n\n    const markup = `<h3 class='library-gallery-recomend'>RECOMMENDATIONS</h3><div class='library-gallery__default'><img class='library-gallery__default-poster' data-id='${films.results[1].id}' src=${IMG_PATH}${films.results[1].poster_path}>\n    <div><p class='library-gallery__default__title'>${films.results[1].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[1].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[2].poster_path} data-id='${films.results[2].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[2].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[2].overview}</p></div>\n    </div>\n    \n    <div class='library-gallery__default'><img class='library-gallery__default-poster' src=${IMG_PATH}${films.results[3].poster_path} data-id='${films.results[3].id}'>\n    <div><p class='library-gallery__default__title'>${films.results[3].title}</p>\n    <p class='library-gallery__default-overview'>${films.results[3].overview}</p></div>\n    </div>`;\n\n    movieListEl.innerHTML = markup;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\ndefaultLibrary();\nexport async function onWatchedBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = 'transparent';\n  queueBtnEl.style.borderColor = '#ffffff';\n\n  watchedBtnEl.style.background = '#ff6b01';\n  watchedBtnEl.style.borderColor = '#ff6b01';\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's fun🎭</p>\";\n    return;\n  }\n  const movieWatched = await readAllUserData(auth.currentUser.uid);\n  if (movieWatched.userDataWatch === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>It seems you haven't watched any movie. You should try, it's fun🎭</p>\";\n\n    return;\n  }\n  if (Object.keys(movieWatched).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>It seems you haven't watched any movie. You should try, it's fun🎭</p>\";\n    return;\n  }\n  const moviesCards = movieWatched.userDataWatch\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nexport async function onQueueBtnClick() {\n  spinnerStart();\n  setTimeout(spinnerStop, 500);\n  queueBtnEl.style.background = '#ff6b01';\n  queueBtnEl.style.borderColor = '#ff6b01';\n\n  watchedBtnEl.style.background = 'transparent';\n  watchedBtnEl.style.borderColor = '#ffffff';\n\n  if (auth.currentUser === null) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this✨</p>\";\n    return;\n  }\n  const movieQueue = await readAllUserData(auth.currentUser.uid);\n  if (movieQueue.userDataQueue === undefined) {\n    movieListEl.innerHTML =\n      \"<p class='no-movies'>The queue is empty. Add all Harry Potter movies - you won't regret this✨</p>\";\n    return;\n  }\n  if (Object.keys(movieQueue).length === 1) {\n    movieListEl.innerHTML =\n      \"<p>The queue is empty. Add all Harry Potter movies - you won't regret this✨</p>\";\n    return;\n  }\n\n  const moviesCards = movieQueue.userDataQueue\n    .map(movie => {\n      return renderMoviesLibrary(movie);\n    })\n    .join('');\n  movieListEl.innerHTML = moviesCards;\n}\n\nwatchedBtnEl.addEventListener('click', onWatchedBtnClick);\nqueueBtnEl.addEventListener('click', onQueueBtnClick);\n","import {\n  auth,\n  writeUserDataQueue,\n  writeUserDataWatch,\n  currentFilmList,\n  readAllUserData,\n} from './authFireBase.js';\nimport { refs } from './refs';\nimport Notiflix from 'notiflix';\nimport { renderModal } from './render_modal';\nimport { onTrailerBtnClick } from './trailer';\nimport { onWatchedBtnClick } from './my-library-watched-queue/my-library-watched-queue'; //add\nimport { onQueueBtnClick } from './my-library-watched-queue/my-library-watched-queue'; //add\n\nconst { modal, overflow, closeBtn, innerModal, body, sectionLibrary } = refs;\nlet queue;\nlet watched;\nasync function updateVar() {\n  if (auth.currentUser === null) {\n    queue = [];\n    watched = [];\n  } else {\n    const q = await readAllUserData(auth.currentUser.uid);\n    const w = await readAllUserData(auth.currentUser.uid);\n    queue = q.userDataQueue || [];\n    watched = w.userDataWatch || [];\n  }\n}\n\nsetTimeout(() => {\n  updateVar();\n}, 2500);\n\nsectionLibrary.addEventListener('click', showModal);\n\nasync function updateMoviesList() {\n  if (auth.currentUser === null) {\n    const allMoviesListFromStorage = localStorage.getItem('currentFilmList');\n    const allMoviesList = JSON.parse(allMoviesListFromStorage);\n    return allMoviesList;\n  } else {\n    try {\n      const allMoviesListFromStorage = await currentFilmList(\n        auth.currentUser.uid\n      );\n      const allMoviesList = allMoviesListFromStorage.currentFilmList || [];\n      return allMoviesList;\n    } catch {\n      return [];\n    }\n  }\n}\nexport async function showModal(e) {\n  if (e.target.nodeName === 'IMG' || e.target.nodeName === 'SPAN') {\n    innerModal.innerHTML = '';\n    modal.classList.remove('hidden-movie-modal');\n    overflow.classList.remove('hidden-movie-modal');\n    overflow.classList.add('overflow-height');\n    sectionLibrary.removeEventListener('click', showModal);\n    document.addEventListener('keydown', closeModalOnEsc);\n    closeBtn.addEventListener('click', closeModal);\n    overflow.addEventListener('click', closeModalOverflow);\n\n    const id =\n      e.target.nodeName === 'IMG'\n        ? e.target.dataset.id\n        : e.target.closest('li').dataset.id;\n    await createModal(id);\n    const top = window.scrollY;\n    body.style.position = 'fixed';\n    body.style.top = `-${top}px`;\n    const watchedBtn = document.querySelector('.modal__btn-watched');\n    const queueBtn = document.querySelector('.modal__btn-queue');\n    const watchTrailerBtn = document.querySelector(\n      '.movie-modal__btn-watch-trailer'\n    );\n    if (auth.currentUser !== null) {\n      watchedBtn.addEventListener('click', handleWatched);\n      queueBtn.addEventListener('click', handleQueued);\n    } else {\n      watchedBtn.setAttribute('disabled', 'disabled');\n      queueBtn.setAttribute('disabled', 'disabled');\n    }\n    watchTrailerBtn.addEventListener('click', onTrailerBtnClick);\n  }\n}\nfunction closeModalOverflow(e) {\n  if (e.currentTarget === e.target) closeModal();\n}\nfunction closeModalOnEsc(e) {\n  if (e.code === 'Escape') closeModal();\n}\nfunction closeModal() {\n  modal.classList.add('hidden-movie-modal');\n  overflow.classList.add('hidden-movie-modal');\n  overflow.classList.remove('overflow-height');\n  sectionLibrary.addEventListener('click', showModal);\n  document.removeEventListener('keydown', closeModal);\n  closeBtn.removeEventListener('click', closeModal);\n  overflow.removeEventListener('click', closeModalOverflow);\n  const top = body.style.top;\n  body.style.position = '';\n  body.style.top = '';\n  window.scrollTo(0, parseInt(top || '0') * -1);\n}\n\nasync function createModal(id) {\n  if (auth.currentUser === null) {\n    const currentList = updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  } else {\n    await updateVar();\n    const currentList = await updateMoviesList();\n    const rendered = await renderModal(currentList, id, watched, queue);\n    innerModal.innerHTML = rendered;\n  }\n}\n\nasync function handleWatched(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInWatched = watched.some(film => film.id === movie.id);\n\n  if (e.target.innerText === 'ADD TO WATCHED') {\n    if (!isInWatched) {\n      watched.push(movie);\n      if (auth.currentUser === null) {\n        localStorage.setItem('movieWatched', JSON.stringify(watched));\n        e.target.innerText = 'Remove from watched';\n        const saved = JSON.parse(localStorage.getItem('movieWatched'));\n      } else {\n        await writeUserDataWatch(auth.currentUser.uid, watched);\n        e.target.innerText = 'Remove from watched';\n        const w = await readAllUserData(auth.currentUser.uid);\n        const saved = w.userDataWatch || [];\n      }\n\n      onWatchedBtnClick();\n      Notiflix.Notify.success('Added to watched!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM WATCHED') {\n    watched = watched.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieWatched', JSON.stringify(watched));\n    } else {\n      await writeUserDataWatch(auth.currentUser.uid, watched);\n    }\n    e.target.innerText = 'Add to watched';\n    onWatchedBtnClick();\n    Notiflix.Notify.success('Removed from watched!');\n  }\n}\nasync function handleQueued(e) {\n  const modalEl = document.querySelector('.movie-modal__main');\n\n  const movie = {\n    poster_path: modalEl.dataset.poster,\n    title: modalEl.dataset.title,\n    genre_ids: modalEl.dataset.genres,\n    release_date: modalEl.dataset.date,\n    vote_average: modalEl.dataset.votes,\n    id: modalEl.dataset.id,\n  };\n\n  const isInQueued = queue.some(film => film.id === movie.id);\n  if (e.target.innerText === 'ADD TO QUEUE') {\n    if (!isInQueued) {\n      queue.push(movie);\n      if (auth.currentUser === null)\n        localStorage.setItem('movieQueue', JSON.stringify(queue));\n      else {\n        await writeUserDataQueue(auth.currentUser.uid, queue);\n      }\n      e.target.innerText = 'Remove from queue';\n      onQueueBtnClick();\n      Notiflix.Notify.success('Added to queue!');\n    }\n  } else if (e.target.innerText === 'REMOVE FROM QUEUE') {\n    queue = queue.filter(film => film.id !== movie.id);\n    if (auth.currentUser === null) {\n      localStorage.setItem('movieQueue', JSON.stringify(queue));\n    } else {\n      await writeUserDataQueue(auth.currentUser.uid, queue);\n    }\n\n    e.target.innerText = 'Add to queue';\n    onQueueBtnClick();\n    Notiflix.Notify.success('Removed from queue!');\n  }\n}\n"],"names":["parcelRequire","$bpxeT","$769382ea8cae2491$var$watchedBtnEl","document","querySelector","$769382ea8cae2491$var$queueBtnEl","$769382ea8cae2491$var$movieListEl","$769382ea8cae2491$var$_defaultLibrary","$parcel$interopDefault","$2TvXO","mark","_callee","page","IMG_PATH","films","markup","Math","floor","random","innerHTML","$asGRZ","default","_ctx","sent","concat","results","id","poster_path","title","overview","console","log","t0","apply","this","arguments","$769382ea8cae2491$export$852eb21c65e590aa","$769382ea8cae2491$var$_onWatchedBtnClick","movieWatched","moviesCards","$kvC6y","spinnerStart","setTimeout","spinnerStop","style","background","borderColor","$9t7bQ","auth","currentUser","readAllUserData","uid","undefined","userDataWatch","Object","keys","length","map","movie","$a9ZY8","renderMoviesLibrary","join","$769382ea8cae2491$export$47c64e1cb6fdbeb7","$769382ea8cae2491$var$_onQueueBtnClick","movieQueue","userDataQueue","$769382ea8cae2491$var$defaultLibrary","addEventListener","$8190bc97d9d4f811$var$queue","$8190bc97d9d4f811$var$watched","$8190bc97d9d4f811$var$modal","$4Nugj","refs","modal","$8190bc97d9d4f811$var$overflow","overflow","$8190bc97d9d4f811$var$closeBtn","closeBtn","$8190bc97d9d4f811$var$innerModal","innerModal","$8190bc97d9d4f811$var$body","body","$8190bc97d9d4f811$var$sectionLibrary","sectionLibrary","$8190bc97d9d4f811$var$updateVar","$8190bc97d9d4f811$var$_updateVar","q","w","$8190bc97d9d4f811$var$updateMoviesList","$8190bc97d9d4f811$var$_updateMoviesList","allMoviesListFromStorage","allMoviesList","allMoviesListFromStorage1","allMoviesList1","localStorage","getItem","JSON","parse","currentFilmList","$8190bc97d9d4f811$export$d7e8d4d4450c819c","e","$8190bc97d9d4f811$var$_showModal","top","watchedBtn","queueBtn","watchTrailerBtn","target","nodeName","classList","remove","add","removeEventListener","$8190bc97d9d4f811$var$closeModalOnEsc","$8190bc97d9d4f811$var$closeModal","$8190bc97d9d4f811$var$closeModalOverflow","dataset","closest","$8190bc97d9d4f811$var$createModal","window","scrollY","position","$8190bc97d9d4f811$var$handleWatched","$8190bc97d9d4f811$var$handleQueued","setAttribute","$cDXQO","onTrailerBtnClick","currentTarget","code","scrollTo","parseInt","$8190bc97d9d4f811$var$_createModal","currentList","rendered","currentList1","rendered1","$h9dm7","renderModal","$8190bc97d9d4f811$var$_handleWatched","modalEl","isInWatched","poster","genre_ids","genres","release_date","date","vote_average","votes","some","film","innerText","push","setItem","stringify","writeUserDataWatch","$6JpON","Notify","success","filter","$8190bc97d9d4f811$var$_handleQueued","isInQueued","writeUserDataQueue"],"version":3,"file":"library.76af3474.js.map"}